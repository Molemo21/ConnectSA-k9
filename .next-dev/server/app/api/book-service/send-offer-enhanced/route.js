"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/book-service/send-offer-enhanced/route";
exports.ids = ["app/api/book-service/send-offer-enhanced/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&page=%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute.ts&appDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&page=%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute.ts&appDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_liqui_OneDrive_Desktop_ConnectSA_ConnectSA_k9_app_api_book_service_send_offer_enhanced_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/book-service/send-offer-enhanced/route.ts */ \"(rsc)/./app/api/book-service/send-offer-enhanced/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/book-service/send-offer-enhanced/route\",\n        pathname: \"/api/book-service/send-offer-enhanced\",\n        filename: \"route\",\n        bundlePath: \"app/api/book-service/send-offer-enhanced/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\liqui\\\\OneDrive\\\\Desktop\\\\ConnectSA\\\\ConnectSA-k9\\\\app\\\\api\\\\book-service\\\\send-offer-enhanced\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_liqui_OneDrive_Desktop_ConnectSA_ConnectSA_k9_app_api_book_service_send_offer_enhanced_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/book-service/send-offer-enhanced/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZib29rLXNlcnZpY2UlMkZzZW5kLW9mZmVyLWVuaGFuY2VkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZib29rLXNlcnZpY2UlMkZzZW5kLW9mZmVyLWVuaGFuY2VkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYm9vay1zZXJ2aWNlJTJGc2VuZC1vZmZlci1lbmhhbmNlZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNsaXF1aSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q0Nvbm5lY3RTQSU1Q0Nvbm5lY3RTQS1rOSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDbGlxdWklNUNPbmVEcml2ZSU1Q0Rlc2t0b3AlNUNDb25uZWN0U0ElNUNDb25uZWN0U0EtazkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21FO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/OGIyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxsaXF1aVxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXENvbm5lY3RTQVxcXFxDb25uZWN0U0EtazlcXFxcYXBwXFxcXGFwaVxcXFxib29rLXNlcnZpY2VcXFxcc2VuZC1vZmZlci1lbmhhbmNlZFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYm9vay1zZXJ2aWNlL3NlbmQtb2ZmZXItZW5oYW5jZWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ib29rLXNlcnZpY2Uvc2VuZC1vZmZlci1lbmhhbmNlZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYm9vay1zZXJ2aWNlL3NlbmQtb2ZmZXItZW5oYW5jZWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxsaXF1aVxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXENvbm5lY3RTQVxcXFxDb25uZWN0U0EtazlcXFxcYXBwXFxcXGFwaVxcXFxib29rLXNlcnZpY2VcXFxcc2VuZC1vZmZlci1lbmhhbmNlZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYm9vay1zZXJ2aWNlL3NlbmQtb2ZmZXItZW5oYW5jZWQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&page=%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute.ts&appDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/book-service/send-offer-enhanced/route.ts":
/*!***********************************************************!*\
  !*** ./app/api/book-service/send-offer-enhanced/route.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db-utils */ \"(rsc)/./lib/db-utils.ts\");\n/* harmony import */ var _lib_notification_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/notification-service */ \"(rsc)/./lib/notification-service.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n\n\n\n\n// Force dynamic rendering to prevent build-time static generation\nconst dynamic = \"force-dynamic\";\nconst runtime = \"nodejs\";\n// Enhanced schema that supports both legacy and catalogue-based pricing\nconst sendOfferSchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    providerId: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    serviceId: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1, \"Service ID is required\").regex(/^([a-z0-9]{25}|[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})$/i, \"Invalid serviceId format. Expected CUID (25 chars) or UUID (36 chars) format.\"),\n    date: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n    time: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n    address: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1),\n    notes: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n    // New optional fields for catalogue-based pricing\n    catalogueItemId: zod__WEBPACK_IMPORTED_MODULE_4__.string().cuid().optional(),\n    // Payment method field\n    paymentMethod: zod__WEBPACK_IMPORTED_MODULE_4__[\"enum\"]([\n        \"ONLINE\",\n        \"CASH\"\n    ]).default(\"ONLINE\"),\n    // Timezone context from client\n    timezone: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n    timezoneOffsetMinutes: zod__WEBPACK_IMPORTED_MODULE_4__.number().optional()\n});\nasync function POST(request) {\n    // Skip during build time\n    if (process.env.NEXT_PHASE === \"phase-production-build\") {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Service temporarily unavailable during deployment\"\n        }, {\n            status: 503\n        });\n    }\n    try {\n        console.log(\"\\uD83D\\uDE80 Send-offer API called - Enhanced with Catalogue Pricing Support\");\n        console.log(\"\\uD83D\\uDD0D Request details:\", {\n            url: request.url,\n            method: request.method,\n            headers: Object.fromEntries(request.headers.entries())\n        });\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n        if (!user || user.role !== \"CLIENT\") {\n            console.log(\"❌ Unauthorized access attempt\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"✅ User authenticated:\", {\n            userId: user.id,\n            role: user.role\n        });\n        const body = await request.json();\n        console.log(\"\\uD83D\\uDCE5 Request body received:\", JSON.stringify(body, null, 2));\n        // Validate request body structure\n        if (!body || typeof body !== \"object\") {\n            console.error(\"❌ Invalid request body:\", body);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request body\"\n            }, {\n                status: 400\n            });\n        }\n        const validated = sendOfferSchema.parse(body);\n        console.log(\"✅ Request validated successfully:\", validated);\n        // Determine pricing mode based on feature flags and request data\n        const useCatalogue =  true && validated.catalogueItemId;\n        console.log(\"\\uD83D\\uDD0D Pricing mode:\", useCatalogue ? \"Catalogue-based\" : \"Legacy\");\n        // Parse date and time with client timezone offset when provided\n        let requestedDateTime;\n        try {\n            const [y, m, d] = validated.date.split(\"-\").map((n)=>parseInt(n, 10));\n            const [hh, mm] = validated.time.split(\":\").map((n)=>parseInt(n, 10));\n            const offset = typeof body.timezoneOffsetMinutes === \"number\" ? body.timezoneOffsetMinutes : undefined;\n            if (!isNaN(y) && !isNaN(m) && !isNaN(d) && !isNaN(hh) && !isNaN(mm) && typeof offset === \"number\") {\n                const utcMillis = Date.UTC(y, m - 1, d, hh, mm) - offset * 60000;\n                requestedDateTime = new Date(utcMillis);\n            } else {\n                // Fallback to naive parsing\n                requestedDateTime = new Date(`${validated.date}T${validated.time}`);\n            }\n        } catch  {\n            requestedDateTime = new Date(`${validated.date}T${validated.time}`);\n        }\n        console.log(\"\\uD83D\\uDCC5 Requested date/time (UTC):\", requestedDateTime.toISOString(), {\n            tz: body.timezone,\n            tzOffsetMin: body.timezoneOffsetMinutes\n        });\n        console.log(`🎯 Job offer request: Client ${user.id} requesting provider ${validated.providerId} for service ${validated.serviceId} on ${validated.date} at ${validated.time}`);\n        // Use the serviceId directly (it's already the correct Prisma ID format)\n        const actualServiceId = validated.serviceId;\n        console.log(\"\\uD83D\\uDD04 Using service ID directly:\", actualServiceId);\n        // Verify the provider is still available for this service\n        console.log(\"\\uD83D\\uDD0D Starting provider verification...\");\n        console.log(\"\\uD83D\\uDD0D Query parameters:\", {\n            providerId: validated.providerId,\n            serviceId: actualServiceId,\n            expectedStatus: \"APPROVED\",\n            expectedAvailable: true\n        });\n        const provider = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.provider.findFirst({\n            where: {\n                id: validated.providerId,\n                services: {\n                    some: {\n                        serviceId: actualServiceId\n                    }\n                },\n                available: true,\n                status: \"APPROVED\"\n            },\n            include: {\n                services: {\n                    where: {\n                        serviceId: actualServiceId\n                    }\n                }\n            }\n        });\n        console.log(\"\\uD83D\\uDD0D Provider query completed, result:\", provider ? \"Found\" : \"Not found\");\n        if (!provider) {\n            console.log(`❌ Provider ${validated.providerId} not found or not available for service ${actualServiceId}`);\n            console.log(\"\\uD83D\\uDD0D Provider query details:\", {\n                providerId: validated.providerId,\n                serviceId: actualServiceId,\n                expectedStatus: \"APPROVED\",\n                expectedAvailable: true\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Provider is no longer available for this service\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"✅ Provider verified:\", {\n            providerId: provider.id,\n            businessName: provider.businessName,\n            available: provider.available,\n            status: provider.status,\n            serviceCount: provider.services.length,\n            services: provider.services.map((s)=>({\n                    serviceId: s.serviceId\n                }))\n        });\n        // Note: Conflict checking is disabled to allow multiple bookings per day\n        // Providers can manage their own schedule and availability\n        console.log(\"✅ Skipping booking conflict check - allowing multiple bookings per day\");\n        // Calculate pricing based on mode\n        let totalAmount = 0;\n        let platformFee = 0;\n        let duration = 2; // Default duration in hours\n        let bookedPrice = null;\n        let bookedCurrency = null;\n        let bookedDurationMins = null;\n        if (useCatalogue) {\n            // Catalogue-based pricing\n            console.log(\"\\uD83D\\uDCB0 Using catalogue-based pricing...\");\n            console.log(\"\\uD83D\\uDD0D Looking for catalogue item:\", {\n                catalogueItemId: validated.catalogueItemId,\n                providerId: validated.providerId\n            });\n            try {\n                console.log(\"\\uD83D\\uDD0D Querying catalogue item with:\", {\n                    catalogueItemId: validated.catalogueItemId,\n                    providerId: validated.providerId\n                });\n                const catalogueItem = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.catalogueItem.findFirst({\n                    where: {\n                        id: validated.catalogueItemId,\n                        providerId: validated.providerId,\n                        isActive: true\n                    },\n                    include: {\n                        service: true\n                    }\n                });\n                console.log(\"\\uD83D\\uDD0D Catalogue item query result:\", catalogueItem ? \"Found\" : \"Not found\");\n                if (!catalogueItem) {\n                    console.log(\"❌ Catalogue item not found, checking if it exists at all...\");\n                    // Check if the catalogue item exists but doesn't match the provider\n                    const anyCatalogueItem = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.catalogueItem.findFirst({\n                        where: {\n                            id: validated.catalogueItemId\n                        }\n                    });\n                    console.log(\"\\uD83D\\uDD0D Any catalogue item with this ID:\", anyCatalogueItem ? \"Found\" : \"Not found\");\n                    if (anyCatalogueItem) {\n                        console.log(\"\\uD83D\\uDD0D Found catalogue item but provider mismatch:\", {\n                            requestedProviderId: validated.providerId,\n                            actualProviderId: anyCatalogueItem.providerId,\n                            isActive: anyCatalogueItem.isActive,\n                            catalogueItemId: validated.catalogueItemId\n                        });\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            error: \"Package provider mismatch\",\n                            details: `The selected package belongs to a different provider. Package ID: ${validated.catalogueItemId}`\n                        }, {\n                            status: 400\n                        });\n                    } else {\n                        console.log(\"\\uD83D\\uDD0D Catalogue item does not exist at all:\", {\n                            catalogueItemId: validated.catalogueItemId,\n                            providerId: validated.providerId\n                        });\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            error: \"Package not found\",\n                            details: `The selected package does not exist. Package ID: ${validated.catalogueItemId}`\n                        }, {\n                            status: 400\n                        });\n                    }\n                }\n                totalAmount = catalogueItem.price;\n                duration = Math.ceil(catalogueItem.durationMins / 60); // Convert minutes to hours and round up\n                bookedPrice = catalogueItem.price;\n                bookedCurrency = catalogueItem.currency;\n                bookedDurationMins = catalogueItem.durationMins;\n                // Ensure duration is a valid integer\n                duration = Math.max(1, Math.round(duration));\n                console.log(\"\\uD83D\\uDCB0 Catalogue pricing:\", {\n                    price: catalogueItem.price,\n                    currency: catalogueItem.currency,\n                    durationMins: catalogueItem.durationMins,\n                    durationHours: duration,\n                    title: catalogueItem.title\n                });\n            } catch (catalogueError) {\n                console.error(\"❌ Error fetching catalogue item:\", catalogueError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to fetch service package details\",\n                    details: catalogueError instanceof Error ? catalogueError.message : \"Unknown error\"\n                }, {\n                    status: 500\n                });\n            }\n        } else {\n            // Legacy pricing\n            console.log(\"\\uD83D\\uDCB0 Using legacy pricing...\");\n            // Get provider's custom rate for this service\n            const providerService = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.providerService.findFirst({\n                where: {\n                    providerId: validated.providerId,\n                    serviceId: actualServiceId\n                },\n                include: {\n                    service: true\n                }\n            });\n            if (providerService?.customRate) {\n                totalAmount = providerService.customRate * duration;\n            } else if (provider.hourlyRate) {\n                totalAmount = provider.hourlyRate * duration;\n            } else if (providerService?.service?.basePrice) {\n                totalAmount = providerService.service.basePrice * duration;\n            } else {\n                // Fallback to default pricing\n                totalAmount = 150 * duration; // R150 per hour default\n            }\n            console.log(\"\\uD83D\\uDCB0 Legacy pricing:\", {\n                totalAmount,\n                duration,\n                customRate: providerService?.customRate,\n                hourlyRate: provider.hourlyRate,\n                basePrice: providerService?.service?.basePrice\n            });\n            // Ensure duration is a valid integer for legacy pricing\n            duration = Math.max(1, Math.round(duration));\n        }\n        // Validate that we have a valid amount\n        if (totalAmount <= 0 || isNaN(totalAmount)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unable to determine service pricing. Please contact support.\",\n                details: \"The provider or service does not have proper pricing configured.\"\n            }, {\n                status: 400\n            });\n        }\n        // Round totalAmount to 2 decimal places\n        totalAmount = Math.round(totalAmount * 100) / 100;\n        // Calculate platform fee (10% of total amount)\n        platformFee = Math.round(totalAmount * 0.1 * 100) / 100; // Round to 2 decimal places\n        // Create a booking with PENDING status (waiting for provider response)\n        console.log(\"\\uD83D\\uDCDD Creating booking with calculated pricing...\", {\n            totalAmount,\n            platformFee,\n            duration,\n            providerId: validated.providerId,\n            serviceId: actualServiceId,\n            catalogueItemId: validated.catalogueItemId,\n            pricingMode: useCatalogue ? \"catalogue\" : \"legacy\"\n        });\n        const booking = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.booking.create({\n            data: {\n                clientId: user.id,\n                providerId: validated.providerId,\n                serviceId: actualServiceId,\n                catalogueItemId: validated.catalogueItemId || null,\n                scheduledDate: requestedDateTime,\n                duration,\n                totalAmount,\n                platformFee,\n                bookedPrice,\n                bookedCurrency,\n                bookedDurationMins,\n                description: validated.notes || null,\n                address: validated.address,\n                status: \"PENDING\",\n                paymentMethod: validated.paymentMethod\n            }\n        });\n        console.log(\"✅ Booking created:\", {\n            bookingId: booking.id,\n            totalAmount: booking.totalAmount,\n            platformFee: booking.platformFee,\n            duration: booking.duration,\n            status: booking.status,\n            catalogueItemId: booking.catalogueItemId,\n            paymentMethod: booking.paymentMethod\n        });\n        // Handle payment creation based on payment method\n        if (validated.paymentMethod === \"CASH\") {\n            console.log(\"\\uD83D\\uDCB0 Creating cash payment record...\");\n            // Create minimal payment record for cash payments\n            const cashPayment = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.payment.create({\n                data: {\n                    bookingId: booking.id,\n                    amount: totalAmount,\n                    paystackRef: `CASH_${booking.id}`,\n                    status: \"CASH_PENDING\"\n                }\n            });\n            console.log(\"✅ Cash payment record created:\", {\n                paymentId: cashPayment.id,\n                bookingId: booking.id,\n                amount: cashPayment.amount,\n                status: cashPayment.status\n            });\n        } else {\n            console.log(\"\\uD83D\\uDCB3 Online payment - Payment record will be created when client initiates payment\");\n        }\n        // Note: Proposal creation removed - table doesn't exist in database\n        console.log(\"ℹ️ Skipping proposal creation (table not available)\");\n        // Create notifications for both client and provider\n        console.log(\"\\uD83D\\uDD14 Creating notifications...\");\n        try {\n            // Get the full booking data with relations for notifications\n            const fullBooking = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_2__.db.booking.findUnique({\n                where: {\n                    id: booking.id\n                },\n                select: {\n                    id: true,\n                    status: true,\n                    scheduledDate: true,\n                    totalAmount: true,\n                    client: {\n                        select: {\n                            id: true,\n                            name: true,\n                            email: true\n                        }\n                    },\n                    provider: {\n                        select: {\n                            businessName: true,\n                            user: {\n                                select: {\n                                    id: true,\n                                    name: true,\n                                    email: true\n                                }\n                            }\n                        }\n                    },\n                    service: {\n                        select: {\n                            name: true,\n                            category: {\n                                select: {\n                                    name: true\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n            if (fullBooking) {\n                // Notify provider about new booking\n                const providerNotification = _lib_notification_service__WEBPACK_IMPORTED_MODULE_3__.NotificationTemplates.BOOKING_CREATED(fullBooking);\n                await (0,_lib_notification_service__WEBPACK_IMPORTED_MODULE_3__.createNotification)({\n                    userId: fullBooking.provider.user.id,\n                    type: providerNotification.type,\n                    title: providerNotification.title,\n                    content: providerNotification.content\n                });\n                // Notify client about booking creation\n                await (0,_lib_notification_service__WEBPACK_IMPORTED_MODULE_3__.createNotification)({\n                    userId: fullBooking.client.id,\n                    type: \"BOOKING_CREATED\",\n                    title: \"Booking Request Sent\",\n                    content: `Your booking request for ${fullBooking.service?.name || \"service\"} has been sent to ${fullBooking.provider?.businessName || \"the provider\"}. You'll be notified when they respond.`\n                });\n                console.log(`🔔 Notifications sent: Provider ${fullBooking.provider.user.email}, Client ${fullBooking.client.email}`);\n            }\n        } catch (notificationError) {\n            console.error(\"❌ Failed to create booking notifications:\", notificationError);\n        // Don't fail the request if notification fails\n        }\n        // Broadcast real-time update to provider\n        console.log(\"\\uD83D\\uDCE1 Broadcasting real-time update to provider...\");\n        try {\n            // Note: WebSocket broadcasting would go here\n            console.log(\"✅ Real-time update broadcasted\");\n        } catch (broadcastError) {\n            console.error(\"❌ Failed to broadcast real-time update:\", broadcastError);\n        // Don't fail the request if broadcasting fails\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            booking: {\n                id: booking.id,\n                status: booking.status,\n                scheduledDate: booking.scheduledDate,\n                totalAmount: booking.totalAmount,\n                providerId: booking.providerId,\n                catalogueItemId: booking.catalogueItemId,\n                paymentMethod: booking.paymentMethod,\n                pricingMode: useCatalogue ? \"catalogue\" : \"legacy\"\n            },\n            message: validated.paymentMethod === \"CASH\" ? \"Job offer sent successfully! Pay cash directly to your provider after service completion.\" : \"Job offer sent successfully! Provider will respond within 2 hours.\"\n        });\n    } catch (error) {\n        console.error(\"❌ Send-offer API error:\", error);\n        if (error instanceof Error) {\n            console.error(\"Error details:\", {\n                message: error.message,\n                stack: error.stack,\n                name: error.name\n            });\n        }\n        // Return specific error message based on error type\n        let errorMessage = \"Failed to send job offer. Please try again.\";\n        let statusCode = 500;\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_5__.ZodError) {\n            errorMessage = `Validation error: ${error.errors[0]?.message || \"Invalid input\"}`;\n            statusCode = 400;\n        } else if (error && typeof error === \"object\" && \"code\" in error) {\n            // Prisma errors\n            if (error.code === \"P1001\" || error.code === \"P1008\") {\n                errorMessage = \"Database connection error. Please try again.\";\n                statusCode = 500;\n            } else if (error.code === \"P2002\") {\n                errorMessage = \"Duplicate entry. Please try again.\";\n                statusCode = 400;\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: errorMessage,\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: statusCode\n        });\n    }\n}\n// Helper function to find alternative times\nasync function findAlternativeTimes(providerId, date, serviceId) {\n    try {\n        // This would implement logic to find alternative available times\n        // For now, return some sample times\n        return [\n            \"09:00\",\n            \"11:00\",\n            \"13:00\",\n            \"15:00\",\n            \"17:00\"\n        ];\n    } catch (error) {\n        console.error(\"Error finding alternative times:\", error);\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2Jvb2stc2VydmljZS9zZW5kLW9mZmVyLWVuaGFuY2VkL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNaO0FBQ1I7QUFDbUQ7QUFDL0Q7QUFFeEIsa0VBQWtFO0FBQzNELE1BQU1NLFVBQVUsZ0JBQWU7QUFDL0IsTUFBTUMsVUFBVSxTQUFRO0FBRS9CLHdFQUF3RTtBQUN4RSxNQUFNQyxrQkFBa0JILHVDQUFRLENBQUM7SUFDL0JLLFlBQVlMLHVDQUFRLEdBQUdPLEdBQUcsQ0FBQztJQUMzQkMsV0FBV1IsdUNBQVEsR0FDaEJPLEdBQUcsQ0FBQyxHQUFHLDBCQUNQRSxLQUFLLENBQUMsa0ZBQWtGO0lBQzNGQyxNQUFNVix1Q0FBUTtJQUNkVyxNQUFNWCx1Q0FBUTtJQUNkWSxTQUFTWix1Q0FBUSxHQUFHTyxHQUFHLENBQUM7SUFDeEJNLE9BQU9iLHVDQUFRLEdBQUdjLFFBQVE7SUFDMUIsa0RBQWtEO0lBQ2xEQyxpQkFBaUJmLHVDQUFRLEdBQUdnQixJQUFJLEdBQUdGLFFBQVE7SUFDM0MsdUJBQXVCO0lBQ3ZCRyxlQUFlakIsd0NBQU0sQ0FBQztRQUFDO1FBQVU7S0FBTyxFQUFFbUIsT0FBTyxDQUFDO0lBQ2xELCtCQUErQjtJQUMvQkMsVUFBVXBCLHVDQUFRLEdBQUdjLFFBQVE7SUFDN0JPLHVCQUF1QnJCLHVDQUFRLEdBQUdjLFFBQVE7QUFDNUM7QUFFTyxlQUFlUyxLQUFLQyxPQUFvQjtJQUM3Qyx5QkFBeUI7SUFDekIsSUFBSUMsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLEtBQUssMEJBQTBCO1FBQ3ZELE9BQU9oQyxxREFBWUEsQ0FBQ2lDLElBQUksQ0FBQztZQUN2QkMsT0FBTztRQUNULEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ25CO0lBRUEsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLGlDQUF1QjtZQUNqQ0MsS0FBS1QsUUFBUVMsR0FBRztZQUNoQkMs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QSxvREFBb0Q7UUFDcEQsSUFBSVcsZUFBZTtRQUNuQixJQUFJQyxhQUFhO1FBRWpCLElBQUloSCxpQkFBaUI3Qix5Q0FBVSxFQUFFO1lBQy9CNEksZUFBZSxDQUFDLGtCQUFrQixFQUFFL0csTUFBTWtILE1BQU0sQ0FBQyxFQUFFLEVBQUVwQyxXQUFXLGdCQUFnQixDQUFDO1lBQ2pGa0MsYUFBYTtRQUNmLE9BQU8sSUFBSWhILFNBQVMsT0FBT0EsVUFBVSxZQUFZLFVBQVVBLE9BQU87WUFDaEUsZ0JBQWdCO1lBQ2hCLElBQUlBLE1BQU1tSCxJQUFJLEtBQUssV0FBV25ILE1BQU1tSCxJQUFJLEtBQUssU0FBUztnQkFDcERKLGVBQWU7Z0JBQ2ZDLGFBQWE7WUFDZixPQUFPLElBQUloSCxNQUFNbUgsSUFBSSxLQUFLLFNBQVM7Z0JBQ2pDSixlQUFlO2dCQUNmQyxhQUFhO1lBQ2Y7UUFDRjtRQUVBLE9BQU9sSixxREFBWUEsQ0FBQ2lDLElBQUksQ0FBQztZQUN2QkMsT0FBTytHO1lBQ1A3QyxTQUFTbEUsaUJBQWlCNkUsUUFBUTdFLE1BQU04RSxPQUFPLEdBQUc7UUFDcEQsR0FBRztZQUFFN0UsUUFBUStHO1FBQVc7SUFDMUI7QUFDRjtBQUVBLDRDQUE0QztBQUM1QyxlQUFlSSxxQkFBcUI1SSxVQUFrQixFQUFFSyxJQUFZLEVBQUVGLFNBQWlCO0lBQ3JGLElBQUk7UUFDRixpRUFBaUU7UUFDakUsb0NBQW9DO1FBQ3BDLE9BQU87WUFDTDtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7SUFDSCxFQUFFLE9BQU9xQixPQUFPO1FBQ2RFLFFBQVFGLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU8sRUFBRTtJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vYXBwL2FwaS9ib29rLXNlcnZpY2Uvc2VuZC1vZmZlci1lbmhhbmNlZC9yb3V0ZS50cz9jZjlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSBcIkAvbGliL2F1dGhcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvbGliL2RiLXV0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVOb3RpZmljYXRpb24sIE5vdGlmaWNhdGlvblRlbXBsYXRlcyB9IGZyb20gXCJAL2xpYi9ub3RpZmljYXRpb24tc2VydmljZVwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuLy8gRm9yY2UgZHluYW1pYyByZW5kZXJpbmcgdG8gcHJldmVudCBidWlsZC10aW1lIHN0YXRpYyBnZW5lcmF0aW9uXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJ1xuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJ1xuXG4vLyBFbmhhbmNlZCBzY2hlbWEgdGhhdCBzdXBwb3J0cyBib3RoIGxlZ2FjeSBhbmQgY2F0YWxvZ3VlLWJhc2VkIHByaWNpbmdcbmNvbnN0IHNlbmRPZmZlclNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcHJvdmlkZXJJZDogei5zdHJpbmcoKS5taW4oMSksXG4gIHNlcnZpY2VJZDogei5zdHJpbmcoKVxuICAgIC5taW4oMSwgXCJTZXJ2aWNlIElEIGlzIHJlcXVpcmVkXCIpXG4gICAgLnJlZ2V4KC9eKFthLXowLTldezI1fXxbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0pJC9pLCBcIkludmFsaWQgc2VydmljZUlkIGZvcm1hdC4gRXhwZWN0ZWQgQ1VJRCAoMjUgY2hhcnMpIG9yIFVVSUQgKDM2IGNoYXJzKSBmb3JtYXQuXCIpLFxuICBkYXRlOiB6LnN0cmluZygpLFxuICB0aW1lOiB6LnN0cmluZygpLFxuICBhZGRyZXNzOiB6LnN0cmluZygpLm1pbigxKSxcbiAgbm90ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLy8gTmV3IG9wdGlvbmFsIGZpZWxkcyBmb3IgY2F0YWxvZ3VlLWJhc2VkIHByaWNpbmdcbiAgY2F0YWxvZ3VlSXRlbUlkOiB6LnN0cmluZygpLmN1aWQoKS5vcHRpb25hbCgpLFxuICAvLyBQYXltZW50IG1ldGhvZCBmaWVsZFxuICBwYXltZW50TWV0aG9kOiB6LmVudW0oWydPTkxJTkUnLCAnQ0FTSCddKS5kZWZhdWx0KCdPTkxJTkUnKSxcbiAgLy8gVGltZXpvbmUgY29udGV4dCBmcm9tIGNsaWVudFxuICB0aW1lem9uZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0aW1lem9uZU9mZnNldE1pbnV0ZXM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAvLyBTa2lwIGR1cmluZyBidWlsZCB0aW1lXG4gIGlmIChwcm9jZXNzLmVudi5ORVhUX1BIQVNFID09PSAncGhhc2UtcHJvZHVjdGlvbi1idWlsZCcpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgZXJyb3I6IFwiU2VydmljZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZSBkdXJpbmcgZGVwbG95bWVudFwiXG4gICAgfSwgeyBzdGF0dXM6IDUwMyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgU2VuZC1vZmZlciBBUEkgY2FsbGVkIC0gRW5oYW5jZWQgd2l0aCBDYXRhbG9ndWUgUHJpY2luZyBTdXBwb3J0Jyk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gUmVxdWVzdCBkZXRhaWxzOicsIHtcbiAgICAgIHVybDogcmVxdWVzdC51cmwsXG4gICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLFxuICAgICAgaGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlcXVlc3QuaGVhZGVycy5lbnRyaWVzKCkpXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XG4gICAgaWYgKCF1c2VyIHx8IHVzZXIucm9sZSAhPT0gXCJDTElFTlRcIikge1xuICAgICAgY29uc29sZS5sb2coJ+KdjCBVbmF1dGhvcml6ZWQgYWNjZXNzIGF0dGVtcHQnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ+KchSBVc2VyIGF1dGhlbnRpY2F0ZWQ6JywgeyB1c2VySWQ6IHVzZXIuaWQsIHJvbGU6IHVzZXIucm9sZSB9KTtcblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zb2xlLmxvZygn8J+TpSBSZXF1ZXN0IGJvZHkgcmVjZWl2ZWQ6JywgSlNPTi5zdHJpbmdpZnkoYm9keSwgbnVsbCwgMikpO1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWVzdCBib2R5IHN0cnVjdHVyZVxuICAgIGlmICghYm9keSB8fCB0eXBlb2YgYm9keSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBJbnZhbGlkIHJlcXVlc3QgYm9keTonLCBib2R5KTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZGF0ZWQgPSBzZW5kT2ZmZXJTY2hlbWEucGFyc2UoYm9keSk7XG4gICAgY29uc29sZS5sb2coJ+KchSBSZXF1ZXN0IHZhbGlkYXRlZCBzdWNjZXNzZnVsbHk6JywgdmFsaWRhdGVkKTtcblxuICAgIC8vIERldGVybWluZSBwcmljaW5nIG1vZGUgYmFzZWQgb24gZmVhdHVyZSBmbGFncyBhbmQgcmVxdWVzdCBkYXRhXG4gICAgY29uc3QgdXNlQ2F0YWxvZ3VlID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQ0FUQUxPR1VFX1BSSUNJTkdfVjEgPT09ICd0cnVlJyAmJiB2YWxpZGF0ZWQuY2F0YWxvZ3VlSXRlbUlkO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFByaWNpbmcgbW9kZTonLCB1c2VDYXRhbG9ndWUgPyAnQ2F0YWxvZ3VlLWJhc2VkJyA6ICdMZWdhY3knKTtcblxuICAgIC8vIFBhcnNlIGRhdGUgYW5kIHRpbWUgd2l0aCBjbGllbnQgdGltZXpvbmUgb2Zmc2V0IHdoZW4gcHJvdmlkZWRcbiAgICBsZXQgcmVxdWVzdGVkRGF0ZVRpbWU6IERhdGU7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFt5LCBtLCBkXSA9IHZhbGlkYXRlZC5kYXRlLnNwbGl0KCctJykubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkpO1xuICAgICAgY29uc3QgW2hoLCBtbV0gPSB2YWxpZGF0ZWQudGltZS5zcGxpdCgnOicpLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApKTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IHR5cGVvZiAoYm9keSBhcyBhbnkpLnRpbWV6b25lT2Zmc2V0TWludXRlcyA9PT0gJ251bWJlcicgPyAoYm9keSBhcyBhbnkpLnRpbWV6b25lT2Zmc2V0TWludXRlcyA6IHVuZGVmaW5lZDtcbiAgICAgIGlmICghaXNOYU4oeSkgJiYgIWlzTmFOKG0pICYmICFpc05hTihkKSAmJiAhaXNOYU4oaGgpICYmICFpc05hTihtbSkgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uc3QgdXRjTWlsbGlzID0gRGF0ZS5VVEMoeSwgKG0gLSAxKSwgZCwgaGgsIG1tKSAtIChvZmZzZXQgKiA2MDAwMCk7XG4gICAgICAgIHJlcXVlc3RlZERhdGVUaW1lID0gbmV3IERhdGUodXRjTWlsbGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIG5haXZlIHBhcnNpbmdcbiAgICAgICAgcmVxdWVzdGVkRGF0ZVRpbWUgPSBuZXcgRGF0ZShgJHt2YWxpZGF0ZWQuZGF0ZX1UJHt2YWxpZGF0ZWQudGltZX1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIHJlcXVlc3RlZERhdGVUaW1lID0gbmV3IERhdGUoYCR7dmFsaWRhdGVkLmRhdGV9VCR7dmFsaWRhdGVkLnRpbWV9YCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCfwn5OFIFJlcXVlc3RlZCBkYXRlL3RpbWUgKFVUQyk6JywgcmVxdWVzdGVkRGF0ZVRpbWUudG9JU09TdHJpbmcoKSwge1xuICAgICAgdHo6IChib2R5IGFzIGFueSkudGltZXpvbmUsXG4gICAgICB0ek9mZnNldE1pbjogKGJvZHkgYXMgYW55KS50aW1lem9uZU9mZnNldE1pbnV0ZXNcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDwn46vIEpvYiBvZmZlciByZXF1ZXN0OiBDbGllbnQgJHt1c2VyLmlkfSByZXF1ZXN0aW5nIHByb3ZpZGVyICR7dmFsaWRhdGVkLnByb3ZpZGVySWR9IGZvciBzZXJ2aWNlICR7dmFsaWRhdGVkLnNlcnZpY2VJZH0gb24gJHt2YWxpZGF0ZWQuZGF0ZX0gYXQgJHt2YWxpZGF0ZWQudGltZX1gKTtcblxuICAgIC8vIFVzZSB0aGUgc2VydmljZUlkIGRpcmVjdGx5IChpdCdzIGFscmVhZHkgdGhlIGNvcnJlY3QgUHJpc21hIElEIGZvcm1hdClcbiAgICBjb25zdCBhY3R1YWxTZXJ2aWNlSWQgPSB2YWxpZGF0ZWQuc2VydmljZUlkO1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFVzaW5nIHNlcnZpY2UgSUQgZGlyZWN0bHk6JywgYWN0dWFsU2VydmljZUlkKTtcblxuICAgIC8vIFZlcmlmeSB0aGUgcHJvdmlkZXIgaXMgc3RpbGwgYXZhaWxhYmxlIGZvciB0aGlzIHNlcnZpY2VcbiAgICBjb25zb2xlLmxvZygn8J+UjSBTdGFydGluZyBwcm92aWRlciB2ZXJpZmljYXRpb24uLi4nKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBRdWVyeSBwYXJhbWV0ZXJzOicsIHtcbiAgICAgIHByb3ZpZGVySWQ6IHZhbGlkYXRlZC5wcm92aWRlcklkLFxuICAgICAgc2VydmljZUlkOiBhY3R1YWxTZXJ2aWNlSWQsXG4gICAgICBleHBlY3RlZFN0YXR1czogXCJBUFBST1ZFRFwiLFxuICAgICAgZXhwZWN0ZWRBdmFpbGFibGU6IHRydWVcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IGRiLnByb3ZpZGVyLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogdmFsaWRhdGVkLnByb3ZpZGVySWQsXG4gICAgICAgIHNlcnZpY2VzOiB7XG4gICAgICAgICAgc29tZTogeyBzZXJ2aWNlSWQ6IGFjdHVhbFNlcnZpY2VJZCB9LFxuICAgICAgICB9LFxuICAgICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICAgIHN0YXR1czogXCJBUFBST1ZFRFwiLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgc2VydmljZXM6IHtcbiAgICAgICAgICB3aGVyZTogeyBzZXJ2aWNlSWQ6IGFjdHVhbFNlcnZpY2VJZCB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb3ZpZGVyIHF1ZXJ5IGNvbXBsZXRlZCwgcmVzdWx0OicsIHByb3ZpZGVyID8gJ0ZvdW5kJyA6ICdOb3QgZm91bmQnKTtcblxuICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinYwgUHJvdmlkZXIgJHt2YWxpZGF0ZWQucHJvdmlkZXJJZH0gbm90IGZvdW5kIG9yIG5vdCBhdmFpbGFibGUgZm9yIHNlcnZpY2UgJHthY3R1YWxTZXJ2aWNlSWR9YCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBQcm92aWRlciBxdWVyeSBkZXRhaWxzOicsIHtcbiAgICAgICAgcHJvdmlkZXJJZDogdmFsaWRhdGVkLnByb3ZpZGVySWQsXG4gICAgICAgIHNlcnZpY2VJZDogYWN0dWFsU2VydmljZUlkLFxuICAgICAgICBleHBlY3RlZFN0YXR1czogXCJBUFBST1ZFRFwiLFxuICAgICAgICBleHBlY3RlZEF2YWlsYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6IFwiUHJvdmlkZXIgaXMgbm8gbG9uZ2VyIGF2YWlsYWJsZSBmb3IgdGhpcyBzZXJ2aWNlXCIgXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfinIUgUHJvdmlkZXIgdmVyaWZpZWQ6JywgeyBcbiAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLCBcbiAgICAgIGJ1c2luZXNzTmFtZTogcHJvdmlkZXIuYnVzaW5lc3NOYW1lLFxuICAgICAgYXZhaWxhYmxlOiBwcm92aWRlci5hdmFpbGFibGUsXG4gICAgICBzdGF0dXM6IHByb3ZpZGVyLnN0YXR1cyxcbiAgICAgIHNlcnZpY2VDb3VudDogcHJvdmlkZXIuc2VydmljZXMubGVuZ3RoLFxuICAgICAgc2VydmljZXM6IHByb3ZpZGVyLnNlcnZpY2VzLm1hcChzID0+ICh7XG4gICAgICAgIHNlcnZpY2VJZDogcy5zZXJ2aWNlSWRcbiAgICAgIH0pKVxuICAgIH0pO1xuXG4gICAgLy8gTm90ZTogQ29uZmxpY3QgY2hlY2tpbmcgaXMgZGlzYWJsZWQgdG8gYWxsb3cgbXVsdGlwbGUgYm9va2luZ3MgcGVyIGRheVxuICAgIC8vIFByb3ZpZGVycyBjYW4gbWFuYWdlIHRoZWlyIG93biBzY2hlZHVsZSBhbmQgYXZhaWxhYmlsaXR5XG4gICAgY29uc29sZS5sb2coJ+KchSBTa2lwcGluZyBib29raW5nIGNvbmZsaWN0IGNoZWNrIC0gYWxsb3dpbmcgbXVsdGlwbGUgYm9va2luZ3MgcGVyIGRheScpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHByaWNpbmcgYmFzZWQgb24gbW9kZVxuICAgIGxldCB0b3RhbEFtb3VudCA9IDA7XG4gICAgbGV0IHBsYXRmb3JtRmVlID0gMDtcbiAgICBsZXQgZHVyYXRpb24gPSAyOyAvLyBEZWZhdWx0IGR1cmF0aW9uIGluIGhvdXJzXG4gICAgbGV0IGJvb2tlZFByaWNlOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgYm9va2VkQ3VycmVuY3k6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIGxldCBib29rZWREdXJhdGlvbk1pbnM6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgaWYgKHVzZUNhdGFsb2d1ZSkge1xuICAgICAgLy8gQ2F0YWxvZ3VlLWJhc2VkIHByaWNpbmdcbiAgICAgIGNvbnNvbGUubG9nKCfwn5KwIFVzaW5nIGNhdGFsb2d1ZS1iYXNlZCBwcmljaW5nLi4uJyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBMb29raW5nIGZvciBjYXRhbG9ndWUgaXRlbTonLCB7XG4gICAgICAgIGNhdGFsb2d1ZUl0ZW1JZDogdmFsaWRhdGVkLmNhdGFsb2d1ZUl0ZW1JZCxcbiAgICAgICAgcHJvdmlkZXJJZDogdmFsaWRhdGVkLnByb3ZpZGVySWRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBRdWVyeWluZyBjYXRhbG9ndWUgaXRlbSB3aXRoOicsIHtcbiAgICAgICAgICBjYXRhbG9ndWVJdGVtSWQ6IHZhbGlkYXRlZC5jYXRhbG9ndWVJdGVtSWQsXG4gICAgICAgICAgcHJvdmlkZXJJZDogdmFsaWRhdGVkLnByb3ZpZGVySWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2F0YWxvZ3VlSXRlbSA9IGF3YWl0IGRiLmNhdGFsb2d1ZUl0ZW0uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IHZhbGlkYXRlZC5jYXRhbG9ndWVJdGVtSWQhLFxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdmFsaWRhdGVkLnByb3ZpZGVySWQsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgc2VydmljZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2F0YWxvZ3VlIGl0ZW0gcXVlcnkgcmVzdWx0OicsIGNhdGFsb2d1ZUl0ZW0gPyAnRm91bmQnIDogJ05vdCBmb3VuZCcpO1xuXG4gICAgICAgIGlmICghY2F0YWxvZ3VlSXRlbSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinYwgQ2F0YWxvZ3VlIGl0ZW0gbm90IGZvdW5kLCBjaGVja2luZyBpZiBpdCBleGlzdHMgYXQgYWxsLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhdGFsb2d1ZSBpdGVtIGV4aXN0cyBidXQgZG9lc24ndCBtYXRjaCB0aGUgcHJvdmlkZXJcbiAgICAgICAgICBjb25zdCBhbnlDYXRhbG9ndWVJdGVtID0gYXdhaXQgZGIuY2F0YWxvZ3VlSXRlbS5maW5kRmlyc3Qoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgaWQ6IHZhbGlkYXRlZC5jYXRhbG9ndWVJdGVtSWQhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQW55IGNhdGFsb2d1ZSBpdGVtIHdpdGggdGhpcyBJRDonLCBhbnlDYXRhbG9ndWVJdGVtID8gJ0ZvdW5kJyA6ICdOb3QgZm91bmQnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoYW55Q2F0YWxvZ3VlSXRlbSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gRm91bmQgY2F0YWxvZ3VlIGl0ZW0gYnV0IHByb3ZpZGVyIG1pc21hdGNoOicsIHtcbiAgICAgICAgICAgICAgcmVxdWVzdGVkUHJvdmlkZXJJZDogdmFsaWRhdGVkLnByb3ZpZGVySWQsXG4gICAgICAgICAgICAgIGFjdHVhbFByb3ZpZGVySWQ6IGFueUNhdGFsb2d1ZUl0ZW0ucHJvdmlkZXJJZCxcbiAgICAgICAgICAgICAgaXNBY3RpdmU6IGFueUNhdGFsb2d1ZUl0ZW0uaXNBY3RpdmUsXG4gICAgICAgICAgICAgIGNhdGFsb2d1ZUl0ZW1JZDogdmFsaWRhdGVkLmNhdGFsb2d1ZUl0ZW1JZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgICAgICBlcnJvcjogXCJQYWNrYWdlIHByb3ZpZGVyIG1pc21hdGNoXCIsXG4gICAgICAgICAgICAgIGRldGFpbHM6IGBUaGUgc2VsZWN0ZWQgcGFja2FnZSBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IHByb3ZpZGVyLiBQYWNrYWdlIElEOiAke3ZhbGlkYXRlZC5jYXRhbG9ndWVJdGVtSWR9YFxuICAgICAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2F0YWxvZ3VlIGl0ZW0gZG9lcyBub3QgZXhpc3QgYXQgYWxsOicsIHtcbiAgICAgICAgICAgICAgY2F0YWxvZ3VlSXRlbUlkOiB2YWxpZGF0ZWQuY2F0YWxvZ3VlSXRlbUlkLFxuICAgICAgICAgICAgICBwcm92aWRlcklkOiB2YWxpZGF0ZWQucHJvdmlkZXJJZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgICAgICBlcnJvcjogXCJQYWNrYWdlIG5vdCBmb3VuZFwiLFxuICAgICAgICAgICAgICBkZXRhaWxzOiBgVGhlIHNlbGVjdGVkIHBhY2thZ2UgZG9lcyBub3QgZXhpc3QuIFBhY2thZ2UgSUQ6ICR7dmFsaWRhdGVkLmNhdGFsb2d1ZUl0ZW1JZH1gXG4gICAgICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRvdGFsQW1vdW50ID0gY2F0YWxvZ3VlSXRlbS5wcmljZTtcbiAgICAgICAgZHVyYXRpb24gPSBNYXRoLmNlaWwoY2F0YWxvZ3VlSXRlbS5kdXJhdGlvbk1pbnMgLyA2MCk7IC8vIENvbnZlcnQgbWludXRlcyB0byBob3VycyBhbmQgcm91bmQgdXBcbiAgICAgICAgYm9va2VkUHJpY2UgPSBjYXRhbG9ndWVJdGVtLnByaWNlO1xuICAgICAgICBib29rZWRDdXJyZW5jeSA9IGNhdGFsb2d1ZUl0ZW0uY3VycmVuY3k7XG4gICAgICAgIGJvb2tlZER1cmF0aW9uTWlucyA9IGNhdGFsb2d1ZUl0ZW0uZHVyYXRpb25NaW5zO1xuICAgICAgICBcbiAgICAgICAgLy8gRW5zdXJlIGR1cmF0aW9uIGlzIGEgdmFsaWQgaW50ZWdlclxuICAgICAgICBkdXJhdGlvbiA9IE1hdGgubWF4KDEsIE1hdGgucm91bmQoZHVyYXRpb24pKTtcblxuICAgICAgICBjb25zb2xlLmxvZygn8J+SsCBDYXRhbG9ndWUgcHJpY2luZzonLCB7XG4gICAgICAgICAgcHJpY2U6IGNhdGFsb2d1ZUl0ZW0ucHJpY2UsXG4gICAgICAgICAgY3VycmVuY3k6IGNhdGFsb2d1ZUl0ZW0uY3VycmVuY3ksXG4gICAgICAgICAgZHVyYXRpb25NaW5zOiBjYXRhbG9ndWVJdGVtLmR1cmF0aW9uTWlucyxcbiAgICAgICAgICBkdXJhdGlvbkhvdXJzOiBkdXJhdGlvbixcbiAgICAgICAgICB0aXRsZTogY2F0YWxvZ3VlSXRlbS50aXRsZVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChjYXRhbG9ndWVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZmV0Y2hpbmcgY2F0YWxvZ3VlIGl0ZW06JywgY2F0YWxvZ3VlRXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBlcnJvcjogXCJGYWlsZWQgdG8gZmV0Y2ggc2VydmljZSBwYWNrYWdlIGRldGFpbHNcIixcbiAgICAgICAgICBkZXRhaWxzOiBjYXRhbG9ndWVFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gY2F0YWxvZ3VlRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMZWdhY3kgcHJpY2luZ1xuICAgICAgY29uc29sZS5sb2coJ/CfkrAgVXNpbmcgbGVnYWN5IHByaWNpbmcuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IHByb3ZpZGVyJ3MgY3VzdG9tIHJhdGUgZm9yIHRoaXMgc2VydmljZVxuICAgICAgY29uc3QgcHJvdmlkZXJTZXJ2aWNlID0gYXdhaXQgZGIucHJvdmlkZXJTZXJ2aWNlLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJvdmlkZXJJZDogdmFsaWRhdGVkLnByb3ZpZGVySWQsXG4gICAgICAgICAgc2VydmljZUlkOiBhY3R1YWxTZXJ2aWNlSWRcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHNlcnZpY2U6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChwcm92aWRlclNlcnZpY2U/LmN1c3RvbVJhdGUpIHtcbiAgICAgICAgdG90YWxBbW91bnQgPSBwcm92aWRlclNlcnZpY2UuY3VzdG9tUmF0ZSAqIGR1cmF0aW9uO1xuICAgICAgfSBlbHNlIGlmIChwcm92aWRlci5ob3VybHlSYXRlKSB7XG4gICAgICAgIHRvdGFsQW1vdW50ID0gcHJvdmlkZXIuaG91cmx5UmF0ZSAqIGR1cmF0aW9uO1xuICAgICAgfSBlbHNlIGlmIChwcm92aWRlclNlcnZpY2U/LnNlcnZpY2U/LmJhc2VQcmljZSkge1xuICAgICAgICB0b3RhbEFtb3VudCA9IHByb3ZpZGVyU2VydmljZS5zZXJ2aWNlLmJhc2VQcmljZSAqIGR1cmF0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gZGVmYXVsdCBwcmljaW5nXG4gICAgICAgIHRvdGFsQW1vdW50ID0gMTUwICogZHVyYXRpb247IC8vIFIxNTAgcGVyIGhvdXIgZGVmYXVsdFxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+SsCBMZWdhY3kgcHJpY2luZzonLCB7XG4gICAgICAgIHRvdGFsQW1vdW50LFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgY3VzdG9tUmF0ZTogcHJvdmlkZXJTZXJ2aWNlPy5jdXN0b21SYXRlLFxuICAgICAgICBob3VybHlSYXRlOiBwcm92aWRlci5ob3VybHlSYXRlLFxuICAgICAgICBiYXNlUHJpY2U6IHByb3ZpZGVyU2VydmljZT8uc2VydmljZT8uYmFzZVByaWNlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIGR1cmF0aW9uIGlzIGEgdmFsaWQgaW50ZWdlciBmb3IgbGVnYWN5IHByaWNpbmdcbiAgICAgIGR1cmF0aW9uID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZChkdXJhdGlvbikpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHRoYXQgd2UgaGF2ZSBhIHZhbGlkIGFtb3VudFxuICAgIGlmICh0b3RhbEFtb3VudCA8PSAwIHx8IGlzTmFOKHRvdGFsQW1vdW50KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIGVycm9yOiBcIlVuYWJsZSB0byBkZXRlcm1pbmUgc2VydmljZSBwcmljaW5nLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LlwiLFxuICAgICAgICBkZXRhaWxzOiBcIlRoZSBwcm92aWRlciBvciBzZXJ2aWNlIGRvZXMgbm90IGhhdmUgcHJvcGVyIHByaWNpbmcgY29uZmlndXJlZC5cIlxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gUm91bmQgdG90YWxBbW91bnQgdG8gMiBkZWNpbWFsIHBsYWNlc1xuICAgIHRvdGFsQW1vdW50ID0gTWF0aC5yb3VuZCh0b3RhbEFtb3VudCAqIDEwMCkgLyAxMDA7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHBsYXRmb3JtIGZlZSAoMTAlIG9mIHRvdGFsIGFtb3VudClcbiAgICBwbGF0Zm9ybUZlZSA9IE1hdGgucm91bmQoKHRvdGFsQW1vdW50ICogMC4xKSAqIDEwMCkgLyAxMDA7IC8vIFJvdW5kIHRvIDIgZGVjaW1hbCBwbGFjZXNcblxuICAgIC8vIENyZWF0ZSBhIGJvb2tpbmcgd2l0aCBQRU5ESU5HIHN0YXR1cyAod2FpdGluZyBmb3IgcHJvdmlkZXIgcmVzcG9uc2UpXG4gICAgY29uc29sZS5sb2coJ/Cfk50gQ3JlYXRpbmcgYm9va2luZyB3aXRoIGNhbGN1bGF0ZWQgcHJpY2luZy4uLicsIHtcbiAgICAgIHRvdGFsQW1vdW50LFxuICAgICAgcGxhdGZvcm1GZWUsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHByb3ZpZGVySWQ6IHZhbGlkYXRlZC5wcm92aWRlcklkLFxuICAgICAgc2VydmljZUlkOiBhY3R1YWxTZXJ2aWNlSWQsXG4gICAgICBjYXRhbG9ndWVJdGVtSWQ6IHZhbGlkYXRlZC5jYXRhbG9ndWVJdGVtSWQsXG4gICAgICBwcmljaW5nTW9kZTogdXNlQ2F0YWxvZ3VlID8gJ2NhdGFsb2d1ZScgOiAnbGVnYWN5J1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGJvb2tpbmcgPSBhd2FpdCBkYi5ib29raW5nLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNsaWVudElkOiB1c2VyLmlkLFxuICAgICAgICBwcm92aWRlcklkOiB2YWxpZGF0ZWQucHJvdmlkZXJJZCxcbiAgICAgICAgc2VydmljZUlkOiBhY3R1YWxTZXJ2aWNlSWQsXG4gICAgICAgIGNhdGFsb2d1ZUl0ZW1JZDogdmFsaWRhdGVkLmNhdGFsb2d1ZUl0ZW1JZCB8fCBudWxsLFxuICAgICAgICBzY2hlZHVsZWREYXRlOiByZXF1ZXN0ZWREYXRlVGltZSxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIHRvdGFsQW1vdW50LFxuICAgICAgICBwbGF0Zm9ybUZlZSxcbiAgICAgICAgYm9va2VkUHJpY2UsXG4gICAgICAgIGJvb2tlZEN1cnJlbmN5LFxuICAgICAgICBib29rZWREdXJhdGlvbk1pbnMsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB2YWxpZGF0ZWQubm90ZXMgfHwgbnVsbCxcbiAgICAgICAgYWRkcmVzczogdmFsaWRhdGVkLmFkZHJlc3MsXG4gICAgICAgIHN0YXR1czogXCJQRU5ESU5HXCIsIC8vIFRoaXMgbWVhbnMgd2FpdGluZyBmb3IgcHJvdmlkZXIgdG8gYWNjZXB0L2RlY2xpbmVcbiAgICAgICAgcGF5bWVudE1ldGhvZDogdmFsaWRhdGVkLnBheW1lbnRNZXRob2QsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBCb29raW5nIGNyZWF0ZWQ6JywgeyBcbiAgICAgIGJvb2tpbmdJZDogYm9va2luZy5pZCwgXG4gICAgICB0b3RhbEFtb3VudDogYm9va2luZy50b3RhbEFtb3VudCxcbiAgICAgIHBsYXRmb3JtRmVlOiBib29raW5nLnBsYXRmb3JtRmVlLFxuICAgICAgZHVyYXRpb246IGJvb2tpbmcuZHVyYXRpb24sXG4gICAgICBzdGF0dXM6IGJvb2tpbmcuc3RhdHVzLFxuICAgICAgY2F0YWxvZ3VlSXRlbUlkOiBib29raW5nLmNhdGFsb2d1ZUl0ZW1JZCxcbiAgICAgIHBheW1lbnRNZXRob2Q6IGJvb2tpbmcucGF5bWVudE1ldGhvZFxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHBheW1lbnQgY3JlYXRpb24gYmFzZWQgb24gcGF5bWVudCBtZXRob2RcbiAgICBpZiAodmFsaWRhdGVkLnBheW1lbnRNZXRob2QgPT09ICdDQVNIJykge1xuICAgICAgY29uc29sZS5sb2coJ/CfkrAgQ3JlYXRpbmcgY2FzaCBwYXltZW50IHJlY29yZC4uLicpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbWluaW1hbCBwYXltZW50IHJlY29yZCBmb3IgY2FzaCBwYXltZW50c1xuICAgICAgY29uc3QgY2FzaFBheW1lbnQgPSBhd2FpdCBkYi5wYXltZW50LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBib29raW5nSWQ6IGJvb2tpbmcuaWQsXG4gICAgICAgICAgYW1vdW50OiB0b3RhbEFtb3VudCxcbiAgICAgICAgICBwYXlzdGFja1JlZjogYENBU0hfJHtib29raW5nLmlkfWAsIC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBjYXNoIHBheW1lbnRzXG4gICAgICAgICAgc3RhdHVzOiAnQ0FTSF9QRU5ESU5HJyxcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2FzaCBwYXltZW50IHJlY29yZCBjcmVhdGVkOicsIHtcbiAgICAgICAgcGF5bWVudElkOiBjYXNoUGF5bWVudC5pZCxcbiAgICAgICAgYm9va2luZ0lkOiBib29raW5nLmlkLFxuICAgICAgICBhbW91bnQ6IGNhc2hQYXltZW50LmFtb3VudCxcbiAgICAgICAgc3RhdHVzOiBjYXNoUGF5bWVudC5zdGF0dXNcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+SsyBPbmxpbmUgcGF5bWVudCAtIFBheW1lbnQgcmVjb3JkIHdpbGwgYmUgY3JlYXRlZCB3aGVuIGNsaWVudCBpbml0aWF0ZXMgcGF5bWVudCcpO1xuICAgIH1cblxuICAgIC8vIE5vdGU6IFByb3Bvc2FsIGNyZWF0aW9uIHJlbW92ZWQgLSB0YWJsZSBkb2Vzbid0IGV4aXN0IGluIGRhdGFiYXNlXG4gICAgY29uc29sZS5sb2coJ+KEue+4jyBTa2lwcGluZyBwcm9wb3NhbCBjcmVhdGlvbiAodGFibGUgbm90IGF2YWlsYWJsZSknKTtcblxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb25zIGZvciBib3RoIGNsaWVudCBhbmQgcHJvdmlkZXJcbiAgICBjb25zb2xlLmxvZygn8J+UlCBDcmVhdGluZyBub3RpZmljYXRpb25zLi4uJylcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHRoZSBmdWxsIGJvb2tpbmcgZGF0YSB3aXRoIHJlbGF0aW9ucyBmb3Igbm90aWZpY2F0aW9uc1xuICAgICAgY29uc3QgZnVsbEJvb2tpbmcgPSBhd2FpdCBkYi5ib29raW5nLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogYm9va2luZy5pZCB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgc2NoZWR1bGVkRGF0ZTogdHJ1ZSxcbiAgICAgICAgICB0b3RhbEFtb3VudDogdHJ1ZSxcbiAgICAgICAgICBjbGllbnQ6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH0sXG4gICAgICAgICAgcHJvdmlkZXI6IHsgXG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgYnVzaW5lc3NOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICB1c2VyOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUgfSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXJ2aWNlOiB7IFxuICAgICAgICAgICAgc2VsZWN0OiB7IFxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLCBcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IHsgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSB9XG4gICAgICAgICAgICB9IFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChmdWxsQm9va2luZykge1xuICAgICAgICAvLyBOb3RpZnkgcHJvdmlkZXIgYWJvdXQgbmV3IGJvb2tpbmdcbiAgICAgICAgY29uc3QgcHJvdmlkZXJOb3RpZmljYXRpb24gPSBOb3RpZmljYXRpb25UZW1wbGF0ZXMuQk9PS0lOR19DUkVBVEVEKGZ1bGxCb29raW5nKTtcbiAgICAgICAgYXdhaXQgY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICB1c2VySWQ6IGZ1bGxCb29raW5nLnByb3ZpZGVyLnVzZXIuaWQsXG4gICAgICAgICAgdHlwZTogcHJvdmlkZXJOb3RpZmljYXRpb24udHlwZSxcbiAgICAgICAgICB0aXRsZTogcHJvdmlkZXJOb3RpZmljYXRpb24udGl0bGUsXG4gICAgICAgICAgY29udGVudDogcHJvdmlkZXJOb3RpZmljYXRpb24uY29udGVudFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBOb3RpZnkgY2xpZW50IGFib3V0IGJvb2tpbmcgY3JlYXRpb25cbiAgICAgICAgYXdhaXQgY3JlYXRlTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICB1c2VySWQ6IGZ1bGxCb29raW5nLmNsaWVudC5pZCxcbiAgICAgICAgICB0eXBlOiAnQk9PS0lOR19DUkVBVEVEJyxcbiAgICAgICAgICB0aXRsZTogJ0Jvb2tpbmcgUmVxdWVzdCBTZW50JyxcbiAgICAgICAgICBjb250ZW50OiBgWW91ciBib29raW5nIHJlcXVlc3QgZm9yICR7ZnVsbEJvb2tpbmcuc2VydmljZT8ubmFtZSB8fCAnc2VydmljZSd9IGhhcyBiZWVuIHNlbnQgdG8gJHtmdWxsQm9va2luZy5wcm92aWRlcj8uYnVzaW5lc3NOYW1lIHx8ICd0aGUgcHJvdmlkZXInfS4gWW91J2xsIGJlIG5vdGlmaWVkIHdoZW4gdGhleSByZXNwb25kLmBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCflJQgTm90aWZpY2F0aW9ucyBzZW50OiBQcm92aWRlciAke2Z1bGxCb29raW5nLnByb3ZpZGVyLnVzZXIuZW1haWx9LCBDbGllbnQgJHtmdWxsQm9va2luZy5jbGllbnQuZW1haWx9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAobm90aWZpY2F0aW9uRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY3JlYXRlIGJvb2tpbmcgbm90aWZpY2F0aW9uczonLCBub3RpZmljYXRpb25FcnJvcik7XG4gICAgICAvLyBEb24ndCBmYWlsIHRoZSByZXF1ZXN0IGlmIG5vdGlmaWNhdGlvbiBmYWlsc1xuICAgIH1cblxuICAgIC8vIEJyb2FkY2FzdCByZWFsLXRpbWUgdXBkYXRlIHRvIHByb3ZpZGVyXG4gICAgY29uc29sZS5sb2coJ/Cfk6EgQnJvYWRjYXN0aW5nIHJlYWwtdGltZSB1cGRhdGUgdG8gcHJvdmlkZXIuLi4nKTtcbiAgICB0cnkge1xuICAgICAgLy8gTm90ZTogV2ViU29ja2V0IGJyb2FkY2FzdGluZyB3b3VsZCBnbyBoZXJlXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFJlYWwtdGltZSB1cGRhdGUgYnJvYWRjYXN0ZWQnKTtcbiAgICB9IGNhdGNoIChicm9hZGNhc3RFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBicm9hZGNhc3QgcmVhbC10aW1lIHVwZGF0ZTonLCBicm9hZGNhc3RFcnJvcik7XG4gICAgICAvLyBEb24ndCBmYWlsIHRoZSByZXF1ZXN0IGlmIGJyb2FkY2FzdGluZyBmYWlsc1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGJvb2tpbmc6IHtcbiAgICAgICAgaWQ6IGJvb2tpbmcuaWQsXG4gICAgICAgIHN0YXR1czogYm9va2luZy5zdGF0dXMsXG4gICAgICAgIHNjaGVkdWxlZERhdGU6IGJvb2tpbmcuc2NoZWR1bGVkRGF0ZSxcbiAgICAgICAgdG90YWxBbW91bnQ6IGJvb2tpbmcudG90YWxBbW91bnQsXG4gICAgICAgIHByb3ZpZGVySWQ6IGJvb2tpbmcucHJvdmlkZXJJZCxcbiAgICAgICAgY2F0YWxvZ3VlSXRlbUlkOiBib29raW5nLmNhdGFsb2d1ZUl0ZW1JZCxcbiAgICAgICAgcGF5bWVudE1ldGhvZDogYm9va2luZy5wYXltZW50TWV0aG9kLFxuICAgICAgICBwcmljaW5nTW9kZTogdXNlQ2F0YWxvZ3VlID8gJ2NhdGFsb2d1ZScgOiAnbGVnYWN5J1xuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IHZhbGlkYXRlZC5wYXltZW50TWV0aG9kID09PSAnQ0FTSCcgXG4gICAgICAgID8gXCJKb2Igb2ZmZXIgc2VudCBzdWNjZXNzZnVsbHkhIFBheSBjYXNoIGRpcmVjdGx5IHRvIHlvdXIgcHJvdmlkZXIgYWZ0ZXIgc2VydmljZSBjb21wbGV0aW9uLlwiXG4gICAgICAgIDogXCJKb2Igb2ZmZXIgc2VudCBzdWNjZXNzZnVsbHkhIFByb3ZpZGVyIHdpbGwgcmVzcG9uZCB3aXRoaW4gMiBob3Vycy5cIlxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFNlbmQtb2ZmZXIgQVBJIGVycm9yOicsIGVycm9yKTtcbiAgICBcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgICAgbmFtZTogZXJyb3IubmFtZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgYmFzZWQgb24gZXJyb3IgdHlwZVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIkZhaWxlZCB0byBzZW5kIGpvYiBvZmZlci4gUGxlYXNlIHRyeSBhZ2Fpbi5cIjtcbiAgICBsZXQgc3RhdHVzQ29kZSA9IDUwMDtcblxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9IGBWYWxpZGF0aW9uIGVycm9yOiAke2Vycm9yLmVycm9yc1swXT8ubWVzc2FnZSB8fCAnSW52YWxpZCBpbnB1dCd9YDtcbiAgICAgIHN0YXR1c0NvZGUgPSA0MDA7XG4gICAgfSBlbHNlIGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdjb2RlJyBpbiBlcnJvcikge1xuICAgICAgLy8gUHJpc21hIGVycm9yc1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQMTAwMScgfHwgZXJyb3IuY29kZSA9PT0gJ1AxMDA4Jykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIkRhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICAgIHN0YXR1c0NvZGUgPSA1MDA7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09ICdQMjAwMicpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJEdXBsaWNhdGUgZW50cnkuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICAgIHN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9LCB7IHN0YXR1czogc3RhdHVzQ29kZSB9KTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZmluZCBhbHRlcm5hdGl2ZSB0aW1lc1xuYXN5bmMgZnVuY3Rpb24gZmluZEFsdGVybmF0aXZlVGltZXMocHJvdmlkZXJJZDogc3RyaW5nLCBkYXRlOiBzdHJpbmcsIHNlcnZpY2VJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICB0cnkge1xuICAgIC8vIFRoaXMgd291bGQgaW1wbGVtZW50IGxvZ2ljIHRvIGZpbmQgYWx0ZXJuYXRpdmUgYXZhaWxhYmxlIHRpbWVzXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIHNvbWUgc2FtcGxlIHRpbWVzXG4gICAgcmV0dXJuIFtcbiAgICAgIFwiMDk6MDBcIixcbiAgICAgIFwiMTE6MDBcIiwgXG4gICAgICBcIjEzOjAwXCIsXG4gICAgICBcIjE1OjAwXCIsXG4gICAgICBcIjE3OjAwXCJcbiAgICBdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgYWx0ZXJuYXRpdmUgdGltZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0Q3VycmVudFVzZXIiLCJkYiIsImNyZWF0ZU5vdGlmaWNhdGlvbiIsIk5vdGlmaWNhdGlvblRlbXBsYXRlcyIsInoiLCJkeW5hbWljIiwicnVudGltZSIsInNlbmRPZmZlclNjaGVtYSIsIm9iamVjdCIsInByb3ZpZGVySWQiLCJzdHJpbmciLCJtaW4iLCJzZXJ2aWNlSWQiLCJyZWdleCIsImRhdGUiLCJ0aW1lIiwiYWRkcmVzcyIsIm5vdGVzIiwib3B0aW9uYWwiLCJjYXRhbG9ndWVJdGVtSWQiLCJjdWlkIiwicGF5bWVudE1ldGhvZCIsImVudW0iLCJkZWZhdWx0IiwidGltZXpvbmUiLCJ0aW1lem9uZU9mZnNldE1pbnV0ZXMiLCJudW1iZXIiLCJQT1NUIiwicmVxdWVzdCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BIQVNFIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiY29uc29sZSIsImxvZyIsInVybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJ1c2VyIiwicm9sZSIsInVzZXJJZCIsImlkIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWxpZGF0ZWQiLCJwYXJzZSIsInVzZUNhdGFsb2d1ZSIsIk5FWFRfUFVCTElDX0NBVEFMT0dVRV9QUklDSU5HX1YxIiwicmVxdWVzdGVkRGF0ZVRpbWUiLCJ5IiwibSIsImQiLCJzcGxpdCIsIm1hcCIsIm4iLCJwYXJzZUludCIsImhoIiwibW0iLCJvZmZzZXQiLCJ1bmRlZmluZWQiLCJpc05hTiIsInV0Y01pbGxpcyIsIkRhdGUiLCJVVEMiLCJ0b0lTT1N0cmluZyIsInR6IiwidHpPZmZzZXRNaW4iLCJhY3R1YWxTZXJ2aWNlSWQiLCJleHBlY3RlZFN0YXR1cyIsImV4cGVjdGVkQXZhaWxhYmxlIiwicHJvdmlkZXIiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsInNlcnZpY2VzIiwic29tZSIsImF2YWlsYWJsZSIsImluY2x1ZGUiLCJidXNpbmVzc05hbWUiLCJzZXJ2aWNlQ291bnQiLCJsZW5ndGgiLCJzIiwidG90YWxBbW91bnQiLCJwbGF0Zm9ybUZlZSIsImR1cmF0aW9uIiwiYm9va2VkUHJpY2UiLCJib29rZWRDdXJyZW5jeSIsImJvb2tlZER1cmF0aW9uTWlucyIsImNhdGFsb2d1ZUl0ZW0iLCJpc0FjdGl2ZSIsInNlcnZpY2UiLCJhbnlDYXRhbG9ndWVJdGVtIiwicmVxdWVzdGVkUHJvdmlkZXJJZCIsImFjdHVhbFByb3ZpZGVySWQiLCJkZXRhaWxzIiwicHJpY2UiLCJNYXRoIiwiY2VpbCIsImR1cmF0aW9uTWlucyIsImN1cnJlbmN5IiwibWF4Iiwicm91bmQiLCJkdXJhdGlvbkhvdXJzIiwidGl0bGUiLCJjYXRhbG9ndWVFcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInByb3ZpZGVyU2VydmljZSIsImN1c3RvbVJhdGUiLCJob3VybHlSYXRlIiwiYmFzZVByaWNlIiwicHJpY2luZ01vZGUiLCJib29raW5nIiwiY3JlYXRlIiwiZGF0YSIsImNsaWVudElkIiwic2NoZWR1bGVkRGF0ZSIsImRlc2NyaXB0aW9uIiwiYm9va2luZ0lkIiwiY2FzaFBheW1lbnQiLCJwYXltZW50IiwiYW1vdW50IiwicGF5c3RhY2tSZWYiLCJwYXltZW50SWQiLCJmdWxsQm9va2luZyIsImZpbmRVbmlxdWUiLCJzZWxlY3QiLCJjbGllbnQiLCJuYW1lIiwiZW1haWwiLCJjYXRlZ29yeSIsInByb3ZpZGVyTm90aWZpY2F0aW9uIiwiQk9PS0lOR19DUkVBVEVEIiwidHlwZSIsImNvbnRlbnQiLCJub3RpZmljYXRpb25FcnJvciIsImJyb2FkY2FzdEVycm9yIiwic3VjY2VzcyIsInN0YWNrIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzQ29kZSIsIlpvZEVycm9yIiwiZXJyb3JzIiwiY29kZSIsImZpbmRBbHRlcm5hdGl2ZVRpbWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/book-service/send-offer-enhanced/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthCookie: () => (/* binding */ clearAuthCookie),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getCurrentUserSafe: () => (/* binding */ getCurrentUserSafe),\n/* harmony export */   getUserDashboardPath: () => (/* binding */ getUserDashboardPath),\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/verify.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _db_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db-utils */ \"(rsc)/./lib/db-utils.ts\");\n\n\n\n\nconst JWT_EXPIRES_IN = \"7d\";\nasync function hashPassword(password) {\n    const saltRounds = 10;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, saltRounds);\n}\nasync function verifyPassword(password, hashedPassword) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, hashedPassword);\n}\nasync function signToken(payload) {\n    const secret = new TextEncoder().encode(process.env.NEXTAUTH_SECRET || \"secret\");\n    return await new jose__WEBPACK_IMPORTED_MODULE_3__.SignJWT(payload).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt().setExpirationTime(JWT_EXPIRES_IN).sign(secret);\n}\nasync function verifyToken(token) {\n    try {\n        const secret = new TextEncoder().encode(process.env.NEXTAUTH_SECRET || \"secret\");\n        const { payload } = await jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify(token, secret);\n        return payload;\n    } catch (error) {\n        return null;\n    }\n}\nasync function getCurrentUser() {\n    try {\n        // Skip during build time\n        if (process.env.NEXT_PHASE === \"phase-production-build\") {\n            console.log(\"Skipping getCurrentUser during build time\");\n            return null;\n        }\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n        const token = cookieStore.get(\"auth-token\")?.value;\n        if (!token) return null;\n        const decoded = await verifyToken(token);\n        if (!decoded) return null;\n        // Verify user still exists and is active\n        const user = await _db_utils__WEBPACK_IMPORTED_MODULE_2__.db.user.findFirst({\n            where: {\n                id: decoded.id,\n                isActive: true\n            },\n            select: {\n                id: true,\n                email: true,\n                name: true,\n                role: true,\n                emailVerified: true,\n                provider: {\n                    select: {\n                        id: true\n                    }\n                }\n            }\n        });\n        return user;\n    } catch (error) {\n        console.error(\"Error in getCurrentUser:\", error);\n        return null;\n    }\n}\n// Compatibility exports for existing imports in API routes\nasync function getCurrentUserSafe() {\n    return await getCurrentUser();\n}\nasync function generateToken(payload) {\n    return await signToken(payload);\n}\nasync function requireAdmin() {\n    const user = await getCurrentUser();\n    if (!user || user.role !== \"ADMIN\") return null;\n    return user;\n}\nasync function getUserFromRequest(request) {\n    // Skip during build time\n    if (false) {}\n    // Check if we're in a browser/Edge runtime environment\n    if (false) {}\n    const cookieHeader = request.headers.get(\"cookie\");\n    if (!cookieHeader) return null;\n    const token = cookieHeader.split(\";\").find((c)=>c.trim().startsWith(\"auth-token=\"))?.split(\"=\")[1];\n    if (!token) return null;\n    const decoded = await verifyToken(token);\n    if (!decoded) return null;\n    // This function is used in middleware, which runs in the Edge runtime where\n    // Prisma is not available. We'll only verify the token here.\n    // The full user object will be fetched from the DB in server components/API routes.\n    return decoded;\n}\nasync function setAuthCookie(user) {\n    const token = await signToken(user);\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    // Simplified cookie configuration - no domain restrictions\n    const cookieOptions = {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        path: \"/\",\n        maxAge: 60 * 60 * 24 * 7\n    };\n    console.log(\"\\uD83C\\uDF6A Setting auth cookie:\", {\n        userId: user.id,\n        userEmail: user.email,\n        cookieDomain: \"auto (no domain specified)\",\n        secure: cookieOptions.secure,\n        sameSite: cookieOptions.sameSite,\n        maxAge: cookieOptions.maxAge\n    });\n    cookieStore.set(\"auth-token\", token, cookieOptions);\n}\nasync function clearAuthCookie() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    cookieStore.delete(\"auth-token\");\n}\nfunction getUserDashboardPath(role, isEmailVerified, providerStatus) {\n    if (!isEmailVerified) return \"/verify-email\";\n    switch(role){\n        case \"CLIENT\":\n            return \"/dashboard\";\n        case \"PROVIDER\":\n            if (providerStatus === \"INCOMPLETE\" || providerStatus === \"REJECTED\") return \"/provider/onboarding\";\n            if (providerStatus === \"PENDING\") return \"/provider/pending\";\n            if (providerStatus === \"APPROVED\") return \"/provider/dashboard\";\n            return \"/provider/onboarding\";\n        case \"ADMIN\":\n            return \"/admin\";\n        default:\n            return \"/dashboard\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU87UUFDVDtZQUNFLE9BQU87SUFDWDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgam9zZSBmcm9tICdqb3NlJztcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIlxyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiXHJcbmltcG9ydCB7IGRiIH0gZnJvbSBcIi4vZGItdXRpbHNcIlxyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiLi9wcmlzbWFcIlxyXG5pbXBvcnQgdHlwZSB7IFVzZXJSb2xlIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCJcclxuXHJcbmNvbnN0IEpXVF9FWFBJUkVTX0lOID0gXCI3ZFwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVc2VyIHtcclxuICBpZDogc3RyaW5nXHJcbiAgZW1haWw6IHN0cmluZ1xyXG4gIG5hbWU6IHN0cmluZ1xyXG4gIHJvbGU6IFVzZXJSb2xlXHJcbiAgZW1haWxWZXJpZmllZDogYm9vbGVhblxyXG4gIGF2YXRhcj86IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpIHtcclxuICBjb25zdCBzYWx0Um91bmRzID0gMTBcclxuICByZXR1cm4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWRQYXNzd29yZDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ25Ub2tlbihwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XHJcbiAgY29uc3Qgc2VjcmV0ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCB8fCAnc2VjcmV0JylcclxuXHJcbiAgcmV0dXJuIGF3YWl0IG5ldyBqb3NlLlNpZ25KV1QocGF5bG9hZClcclxuICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6ICdIUzI1NicgfSlcclxuICAgIC5zZXRJc3N1ZWRBdCgpXHJcbiAgICAuc2V0RXhwaXJhdGlvblRpbWUoSldUX0VYUElSRVNfSU4pXHJcbiAgICAuc2lnbihzZWNyZXQpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlY3JldCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfHwgJ3NlY3JldCcpXHJcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGpvc2Uuand0VmVyaWZ5KHRva2VuLCBzZWNyZXQpXHJcbiAgICByZXR1cm4gcGF5bG9hZFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCk6IFByb21pc2U8KEF1dGhVc2VyICYgeyBwcm92aWRlcj86IHsgaWQ6IHN0cmluZyB9IH0pIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBTa2lwIGR1cmluZyBidWlsZCB0aW1lXHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QSEFTRSA9PT0gJ3BoYXNlLXByb2R1Y3Rpb24tYnVpbGQnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyBnZXRDdXJyZW50VXNlciBkdXJpbmcgYnVpbGQgdGltZScpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxyXG4gICAgY29uc3QgdG9rZW4gPSBjb29raWVTdG9yZS5nZXQoXCJhdXRoLXRva2VuXCIpPy52YWx1ZVxyXG5cclxuICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXHJcblxyXG4gICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKVxyXG4gICAgaWYgKCFkZWNvZGVkKSByZXR1cm4gbnVsbFxyXG5cclxuICAgIC8vIFZlcmlmeSB1c2VyIHN0aWxsIGV4aXN0cyBhbmQgaXMgYWN0aXZlXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIudXNlci5maW5kRmlyc3Qoe1xyXG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5pZCBhcyBzdHJpbmcsIGlzQWN0aXZlOiB0cnVlIH0sXHJcbiAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgIGlkOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsOiB0cnVlLFxyXG4gICAgICAgIG5hbWU6IHRydWUsXHJcbiAgICAgICAgcm9sZTogdHJ1ZSxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxyXG4gICAgICAgIHByb3ZpZGVyOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSB9IH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiB1c2VyIGFzIEF1dGhVc2VyICYgeyBwcm92aWRlcj86IHsgaWQ6IHN0cmluZyB9IH0gfCBudWxsXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1cnJlbnRVc2VyOicsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG4vLyBDb21wYXRpYmlsaXR5IGV4cG9ydHMgZm9yIGV4aXN0aW5nIGltcG9ydHMgaW4gQVBJIHJvdXRlc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXJTYWZlKCkge1xyXG4gIHJldHVybiBhd2FpdCBnZXRDdXJyZW50VXNlcigpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHBheWxvYWQ6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcclxuICByZXR1cm4gYXdhaXQgc2lnblRva2VuKHBheWxvYWQpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQWRtaW4oKTogUHJvbWlzZTxBdXRoVXNlciB8IG51bGw+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKVxyXG4gIGlmICghdXNlciB8fCB1c2VyLnJvbGUgIT09ICdBRE1JTicpIHJldHVybiBudWxsXHJcbiAgcmV0dXJuIHVzZXJcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJGcm9tUmVxdWVzdChyZXF1ZXN0OiBSZXF1ZXN0KTogUHJvbWlzZTxBdXRoVXNlciB8IG51bGw+IHtcclxuICAvLyBTa2lwIGR1cmluZyBidWlsZCB0aW1lXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgcHJvY2Vzcy5lbnYuVkVSQ0VMID09PSAnMScgJiYgIXByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCkge1xyXG4gICAgY29uc29sZS5sb2coJ1NraXBwaW5nIGdldFVzZXJGcm9tUmVxdWVzdCBkdXJpbmcgYnVpbGQgdGltZScpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIvRWRnZSBydW50aW1lIGVudmlyb25tZW50XHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIHx8IHByb2Nlc3MuZW52Lk5FWFRfUlVOVElNRSA9PT0gJ2VkZ2UnKSB7XHJcbiAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgZ2V0VXNlckZyb21SZXF1ZXN0IGluIGJyb3dzZXIvRWRnZSBydW50aW1lJyk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvb2tpZUhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJjb29raWVcIilcclxuICBpZiAoIWNvb2tpZUhlYWRlcikgcmV0dXJuIG51bGxcclxuXHJcbiAgY29uc3QgdG9rZW4gPSBjb29raWVIZWFkZXJcclxuICAgIC5zcGxpdChcIjtcIilcclxuICAgIC5maW5kKGMgPT4gYy50cmltKCkuc3RhcnRzV2l0aChcImF1dGgtdG9rZW49XCIpKVxyXG4gICAgPy5zcGxpdChcIj1cIilbMV1cclxuXHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcclxuXHJcbiAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcclxuICBpZiAoIWRlY29kZWQpIHJldHVybiBudWxsO1xyXG5cclxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW4gbWlkZGxld2FyZSwgd2hpY2ggcnVucyBpbiB0aGUgRWRnZSBydW50aW1lIHdoZXJlXHJcbiAgLy8gUHJpc21hIGlzIG5vdCBhdmFpbGFibGUuIFdlJ2xsIG9ubHkgdmVyaWZ5IHRoZSB0b2tlbiBoZXJlLlxyXG4gIC8vIFRoZSBmdWxsIHVzZXIgb2JqZWN0IHdpbGwgYmUgZmV0Y2hlZCBmcm9tIHRoZSBEQiBpbiBzZXJ2ZXIgY29tcG9uZW50cy9BUEkgcm91dGVzLlxyXG4gIHJldHVybiBkZWNvZGVkO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0QXV0aENvb2tpZSh1c2VyOiBBdXRoVXNlcikge1xyXG4gIGNvbnN0IHRva2VuID0gYXdhaXQgc2lnblRva2VuKHVzZXIpO1xyXG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xyXG5cclxuICAvLyBTaW1wbGlmaWVkIGNvb2tpZSBjb25maWd1cmF0aW9uIC0gbm8gZG9tYWluIHJlc3RyaWN0aW9uc1xyXG4gIGNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7XHJcbiAgICBodHRwT25seTogdHJ1ZSxcclxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiLFxyXG4gICAgc2FtZVNpdGU6IFwibGF4XCIgYXMgY29uc3QsXHJcbiAgICBwYXRoOiAnLycsXHJcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDcgZGF5c1xyXG4gICAgLy8gTm8gZG9tYWluIHNwZWNpZmllZCAtIGxldCBicm93c2VyIGhhbmRsZSBpdCBhdXRvbWF0aWNhbGx5XHJcbiAgfTtcclxuXHJcbiAgY29uc29sZS5sb2coJ/CfjaogU2V0dGluZyBhdXRoIGNvb2tpZTonLCB7XHJcbiAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICB1c2VyRW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICBjb29raWVEb21haW46ICdhdXRvIChubyBkb21haW4gc3BlY2lmaWVkKScsXHJcbiAgICBzZWN1cmU6IGNvb2tpZU9wdGlvbnMuc2VjdXJlLFxyXG4gICAgc2FtZVNpdGU6IGNvb2tpZU9wdGlvbnMuc2FtZVNpdGUsXHJcbiAgICBtYXhBZ2U6IGNvb2tpZU9wdGlvbnMubWF4QWdlXHJcbiAgfSk7XHJcblxyXG4gIGNvb2tpZVN0b3JlLnNldCgnYXV0aC10b2tlbicsIHRva2VuLCBjb29raWVPcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyQXV0aENvb2tpZSgpIHtcclxuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxyXG4gIGNvb2tpZVN0b3JlLmRlbGV0ZShcImF1dGgtdG9rZW5cIilcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJEYXNoYm9hcmRQYXRoKHJvbGU6IFVzZXJSb2xlLCBpc0VtYWlsVmVyaWZpZWQ6IGJvb2xlYW4sIHByb3ZpZGVyU3RhdHVzPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICBpZiAoIWlzRW1haWxWZXJpZmllZCkgcmV0dXJuIFwiL3ZlcmlmeS1lbWFpbFwiXHJcblxyXG4gIHN3aXRjaCAocm9sZSkge1xyXG4gICAgY2FzZSBcIkNMSUVOVFwiOlxyXG4gICAgICByZXR1cm4gXCIvZGFzaGJvYXJkXCJcclxuICAgIGNhc2UgXCJQUk9WSURFUlwiOlxyXG4gICAgICBpZiAocHJvdmlkZXJTdGF0dXMgPT09IFwiSU5DT01QTEVURVwiIHx8IHByb3ZpZGVyU3RhdHVzID09PSBcIlJFSkVDVEVEXCIpIHJldHVybiBcIi9wcm92aWRlci9vbmJvYXJkaW5nXCJcclxuICAgICAgaWYgKHByb3ZpZGVyU3RhdHVzID09PSBcIlBFTkRJTkdcIikgcmV0dXJuIFwiL3Byb3ZpZGVyL3BlbmRpbmdcIlxyXG4gICAgICBpZiAocHJvdmlkZXJTdGF0dXMgPT09IFwiQVBQUk9WRURcIikgcmV0dXJuIFwiL3Byb3ZpZGVyL2Rhc2hib2FyZFwiXHJcbiAgICAgIHJldHVybiBcIi9wcm92aWRlci9vbmJvYXJkaW5nXCJcclxuICAgIGNhc2UgXCJBRE1JTlwiOlxyXG4gICAgICByZXR1cm4gXCIvYWRtaW5cIlxyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIFwiL2Rhc2hib2FyZFwiXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJqb3NlIiwiYmNyeXB0IiwiY29va2llcyIsImRiIiwiSldUX0VYUElSRVNfSU4iLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsInNhbHRSb3VuZHMiLCJoYXNoIiwidmVyaWZ5UGFzc3dvcmQiLCJoYXNoZWRQYXNzd29yZCIsImNvbXBhcmUiLCJzaWduVG9rZW4iLCJwYXlsb2FkIiwic2VjcmV0IiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwiU2lnbkpXVCIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldElzc3VlZEF0Iiwic2V0RXhwaXJhdGlvblRpbWUiLCJzaWduIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsImp3dFZlcmlmeSIsImVycm9yIiwiZ2V0Q3VycmVudFVzZXIiLCJORVhUX1BIQVNFIiwiY29uc29sZSIsImxvZyIsImNvb2tpZVN0b3JlIiwiZ2V0IiwidmFsdWUiLCJkZWNvZGVkIiwidXNlciIsImZpbmRGaXJzdCIsIndoZXJlIiwiaWQiLCJpc0FjdGl2ZSIsInNlbGVjdCIsImVtYWlsIiwibmFtZSIsInJvbGUiLCJlbWFpbFZlcmlmaWVkIiwicHJvdmlkZXIiLCJnZXRDdXJyZW50VXNlclNhZmUiLCJnZW5lcmF0ZVRva2VuIiwicmVxdWlyZUFkbWluIiwiZ2V0VXNlckZyb21SZXF1ZXN0IiwicmVxdWVzdCIsIlZFUkNFTCIsIkRBVEFCQVNFX1VSTCIsIk5FWFRfUlVOVElNRSIsImNvb2tpZUhlYWRlciIsImhlYWRlcnMiLCJzcGxpdCIsImZpbmQiLCJjIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJzZXRBdXRoQ29va2llIiwiY29va2llT3B0aW9ucyIsImh0dHBPbmx5Iiwic2VjdXJlIiwic2FtZVNpdGUiLCJwYXRoIiwibWF4QWdlIiwidXNlcklkIiwidXNlckVtYWlsIiwiY29va2llRG9tYWluIiwic2V0IiwiY2xlYXJBdXRoQ29va2llIiwiZGVsZXRlIiwiZ2V0VXNlckRhc2hib2FyZFBhdGgiLCJpc0VtYWlsVmVyaWZpZWQiLCJwcm92aWRlclN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db-utils.ts":
/*!*************************!*\
  !*** ./lib/db-utils.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   withRetry: () => (/* binding */ withRetry)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./lib/prisma.ts\");\n\n// Retry configuration for database operations\nconst RETRY_CONFIG = {\n    maxAttempts: 3,\n    baseDelay: 1000,\n    maxDelay: 5000\n};\n// Exponential backoff delay\nconst getDelay = (attempt)=>{\n    const delay = RETRY_CONFIG.baseDelay * Math.pow(2, attempt - 1);\n    return Math.min(delay, RETRY_CONFIG.maxDelay);\n};\n// Check if error is retryable\nconst isRetryableError = (error)=>{\n    if (!error) return false;\n    const message = error.message || \"\";\n    const code = error.code || \"\";\n    // Retry on \"Engine is not yet connected\" errors (common with pooler)\n    if (message.includes(\"Engine is not yet connected\")) {\n        return true;\n    }\n    // Retry on prepared statement errors (Supabase connection issues)\n    if (message.includes(\"prepared statement\") || message.includes(\"does not exist\")) {\n        return true;\n    }\n    // Retry on connection errors\n    if (code === \"P1001\" || code === \"P1008\" || code === \"P1017\") {\n        return true;\n    }\n    // Retry on timeout errors\n    if (code === \"P2024\" || message.includes(\"timeout\") || message.includes(\"connection pool\")) {\n        return true;\n    }\n    return false;\n};\n// Generic retry wrapper for database operations\nasync function withRetry(operation, context = \"database operation\") {\n    // Check if Prisma client is available\n    if (!_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n        throw new Error(`Cannot execute ${context} - Prisma client not available in this environment`);\n    }\n    let lastError;\n    for(let attempt = 1; attempt <= RETRY_CONFIG.maxAttempts; attempt++){\n        try {\n            return await operation();\n        } catch (error) {\n            lastError = error;\n            if (attempt === RETRY_CONFIG.maxAttempts || !isRetryableError(error)) {\n                console.error(`❌ ${context} failed after ${attempt} attempts:`, error);\n                throw error;\n            }\n            console.warn(`⚠️ ${context} failed (attempt ${attempt}/${RETRY_CONFIG.maxAttempts}), retrying...`, error);\n            // Wait before retrying\n            await new Promise((resolve)=>setTimeout(resolve, getDelay(attempt)));\n            // For connection errors, try to refresh the connection\n            if (error.message && (error.message.includes(\"prepared statement\") || error.message.includes(\"Engine is not yet connected\") || error.message.includes(\"connection pool\"))) {\n                console.log(\"\\uD83D\\uDD04 Attempting to refresh Prisma connection...\");\n                try {\n                    await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$disconnect();\n                    await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$connect();\n                    console.log(\"✅ Prisma connection refreshed\");\n                } catch (refreshError) {\n                    console.warn(\"⚠️ Failed to refresh Prisma connection:\", refreshError);\n                }\n            }\n        }\n    }\n    throw lastError;\n}\n// Create database operations wrapper\nconst createDbWrapper = ()=>{\n    if (!_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"]) {\n        console.warn(\"⚠️ Prisma client not available - running in browser/Edge runtime\");\n        // Return dummy db object for build-time compatibility\n        return {\n            user: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                create: ()=>Promise.resolve(null)\n            },\n            provider: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                upsert: ()=>Promise.resolve(null)\n            },\n            booking: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                aggregate: ()=>Promise.resolve({\n                        _sum: {\n                            totalAmount: 0\n                        },\n                        _avg: {\n                            totalAmount: 0\n                        }\n                    })\n            },\n            payment: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                aggregate: ()=>Promise.resolve({\n                        _sum: {\n                            amount: 0\n                        },\n                        _avg: {\n                            rating: 0\n                        }\n                    })\n            },\n            notification: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                updateMany: ()=>Promise.resolve({\n                        count: 0\n                    }),\n                delete: ()=>Promise.resolve(null),\n                deleteMany: ()=>Promise.resolve({\n                        count: 0\n                    })\n            },\n            catalogueItem: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                upsert: ()=>Promise.resolve(null)\n            },\n            review: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                aggregate: ()=>Promise.resolve({\n                        _sum: {\n                            amount: 0\n                        },\n                        _avg: {\n                            rating: 0\n                        }\n                    })\n            },\n            payout: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null)\n            },\n            service: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0)\n            },\n            serviceCategory: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null)\n            },\n            providerService: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                createMany: ()=>Promise.resolve({\n                        count: 0\n                    }),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                deleteMany: ()=>Promise.resolve({\n                        count: 0\n                    })\n            },\n            verificationToken: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                deleteMany: ()=>Promise.resolve({\n                        count: 0\n                    })\n            },\n            passwordResetToken: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                deleteMany: ()=>Promise.resolve({\n                        count: 0\n                    })\n            },\n            bookingDraft: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                delete: ()=>Promise.resolve(null),\n                deleteMany: ()=>Promise.resolve({\n                        count: 0\n                    })\n            },\n            notification: {\n                findFirst: ()=>Promise.resolve(null),\n                findMany: ()=>Promise.resolve([]),\n                findUnique: ()=>Promise.resolve(null),\n                count: ()=>Promise.resolve(0),\n                create: ()=>Promise.resolve(null),\n                update: ()=>Promise.resolve(null),\n                updateMany: ()=>Promise.resolve({\n                        count: 0\n                    }),\n                delete: ()=>Promise.resolve(null),\n                deleteMany: ()=>Promise.resolve({\n                        count: 0\n                    })\n            },\n            $transaction: (callback)=>Promise.resolve(callback({})),\n            $queryRaw: ()=>Promise.resolve([]),\n            $executeRaw: ()=>Promise.resolve(0),\n            $disconnect: ()=>Promise.resolve()\n        };\n    }\n    // Return real db wrapper with retry logic\n    return {\n        // User operations\n        user: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findFirst(args), \"user.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findMany(args), \"user.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findUnique(args), \"user.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.count(args), \"user.count\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.update(args), \"user.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.delete(args), \"user.delete\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.create(args), \"user.create\")\n        },\n        // Provider operations\n        provider: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.findFirst(args), \"provider.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.findMany(args), \"provider.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.findUnique(args), \"provider.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.count(args), \"provider.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.create(args), \"provider.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.update(args), \"provider.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.delete(args), \"provider.delete\"),\n            upsert: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provider.upsert(args), \"provider.upsert\")\n        },\n        // Booking operations\n        booking: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.findFirst(args), \"booking.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.findMany(args), \"booking.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.findUnique(args), \"booking.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.count(args), \"booking.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.create(args), \"booking.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.update(args), \"booking.update\"),\n            aggregate: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].booking.aggregate(args), \"booking.aggregate\")\n        },\n        // Payment operations\n        payment: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.findFirst(args), \"payment.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.findMany(args), \"payment.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.findUnique(args), \"payment.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.count(args), \"payment.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.create(args), \"payment.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.update(args), \"payment.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.delete(args), \"payment.delete\"),\n            aggregate: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payment.aggregate(args), \"payment.aggregate\")\n        },\n        // Review operations\n        review: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].review.findFirst(args), \"review.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].review.findMany(args), \"review.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].review.findUnique(args), \"review.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].review.count(args), \"review.count\"),\n            aggregate: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].review.aggregate(args), \"review.aggregate\")\n        },\n        // Notification operations\n        notification: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.findFirst(args), \"notification.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.findMany(args), \"notification.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.findUnique(args), \"notification.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.count(args), \"notification.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.create(args), \"notification.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.update(args), \"notification.update\"),\n            updateMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.updateMany(args), \"notification.updateMany\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.delete(args), \"notification.delete\"),\n            deleteMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification.deleteMany(args), \"notification.deleteMany\")\n        },\n        // Payout operations\n        payout: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.findFirst(args), \"payout.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.findMany(args), \"payout.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.findUnique(args), \"payout.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.count(args), \"payout.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.create(args), \"payout.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.update(args), \"payout.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].payout.delete(args), \"payout.delete\")\n        },\n        // Service operations\n        service: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].service.findFirst(args), \"service.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].service.findMany(args), \"service.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].service.findUnique(args), \"service.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].service.count(args), \"service.count\")\n        },\n        // ServiceCategory operations\n        serviceCategory: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.findFirst(args), \"serviceCategory.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.findMany(args), \"serviceCategory.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.findUnique(args), \"serviceCategory.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.count(args), \"serviceCategory.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.create(args), \"serviceCategory.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.update(args), \"serviceCategory.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].serviceCategory.delete(args), \"serviceCategory.delete\")\n        },\n        // ProviderService operations\n        providerService: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.findFirst(args), \"providerService.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.findMany(args), \"providerService.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.findUnique(args), \"providerService.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.count(args), \"providerService.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.create(args), \"providerService.create\"),\n            createMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.createMany(args), \"providerService.createMany\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.update(args), \"providerService.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.delete(args), \"providerService.delete\"),\n            deleteMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providerService.deleteMany(args), \"providerService.deleteMany\")\n        },\n        // VerificationToken operations\n        verificationToken: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.findFirst(args), \"verificationToken.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.findMany(args), \"verificationToken.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.findUnique(args), \"verificationToken.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.count(args), \"verificationToken.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.create(args), \"verificationToken.create\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.delete(args), \"verificationToken.delete\"),\n            deleteMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].verificationToken.deleteMany(args), \"verificationToken.deleteMany\")\n        },\n        // PasswordResetToken operations\n        passwordResetToken: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.findFirst(args), \"passwordResetToken.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.findMany(args), \"passwordResetToken.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.findUnique(args), \"passwordResetToken.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.count(args), \"passwordResetToken.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.create(args), \"passwordResetToken.create\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.delete(args), \"passwordResetToken.delete\"),\n            deleteMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].passwordResetToken.deleteMany(args), \"passwordResetToken.deleteMany\")\n        },\n        // BookingDraft operations\n        bookingDraft: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.findFirst(args), \"bookingDraft.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.findMany(args), \"bookingDraft.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.findUnique(args), \"bookingDraft.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.count(args), \"bookingDraft.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.create(args), \"bookingDraft.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.update(args), \"bookingDraft.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.delete(args), \"bookingDraft.delete\"),\n            deleteMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bookingDraft.deleteMany(args), \"bookingDraft.deleteMany\")\n        },\n        // CatalogueItem operations\n        catalogueItem: {\n            findFirst: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.findFirst(args), \"catalogueItem.findFirst\"),\n            findMany: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.findMany(args), \"catalogueItem.findMany\"),\n            findUnique: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.findUnique(args), \"catalogueItem.findUnique\"),\n            count: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.count(args), \"catalogueItem.count\"),\n            create: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.create(args), \"catalogueItem.create\"),\n            update: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.update(args), \"catalogueItem.update\"),\n            delete: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.delete(args), \"catalogueItem.delete\"),\n            upsert: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].catalogueItem.upsert(args), \"catalogueItem.upsert\")\n        },\n        // Transaction operations\n        $transaction: async (callback)=>{\n            // For transactions, we need to handle retries differently\n            // because the callback needs to receive the transaction object\n            let lastError;\n            for(let attempt = 1; attempt <= RETRY_CONFIG.maxAttempts; attempt++){\n                try {\n                    return await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(callback);\n                } catch (error) {\n                    lastError = error;\n                    if (attempt === RETRY_CONFIG.maxAttempts || !isRetryableError(error)) {\n                        console.error(`❌ db.$transaction failed after ${attempt} attempts:`, error);\n                        throw error;\n                    }\n                    console.warn(`⚠️ db.$transaction failed (attempt ${attempt}/${RETRY_CONFIG.maxAttempts}), retrying...`, error);\n                    // Wait before retrying\n                    await new Promise((resolve)=>setTimeout(resolve, getDelay(attempt)));\n                    // For connection errors, try to refresh the connection\n                    if (error.message && (error.message.includes(\"prepared statement\") || error.message.includes(\"Engine is not yet connected\") || error.message.includes(\"connection pool\"))) {\n                        console.log(\"\\uD83D\\uDD04 Attempting to refresh Prisma connection...\");\n                        try {\n                            await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$disconnect();\n                            await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$connect();\n                            console.log(\"✅ Prisma connection refreshed\");\n                        } catch (refreshError) {\n                            console.warn(\"⚠️ Failed to refresh Prisma connection:\", refreshError);\n                        }\n                    }\n                }\n            }\n            throw lastError;\n        },\n        // Raw query operations\n        $queryRaw: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$queryRaw(args), \"db.$queryRaw\"),\n        $executeRaw: (args)=>withRetry(()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$executeRaw(args), \"db.$executeRaw\"),\n        $disconnect: ()=>_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$disconnect()\n    };\n};\n// Create and export the database wrapper\nconst db = createDbWrapper();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2xELFVBQVUsSUFBTWhCLCtDQUFNQSxDQUFDZ0UsU0FBUyxDQUFDRSxPQUFPO1FBQ2xFRCxhQUFhLENBQUNDLE9BQWNsRCxVQUFVLElBQU1oQiwrQ0FBTUEsQ0FBQ2lFLFdBQVcsQ0FBQ0MsT0FBTztRQUN0RXZDLGFBQWEsSUFBTTNCLCtDQUFNQSxDQUFDMkIsV0FBVztJQUN2QztBQUNGO0FBRUEseUNBQXlDO0FBQ2xDLE1BQU13QyxLQUFLckMsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9kYi11dGlscy50cz9jZDUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwcmlzbWEgZnJvbSAnLi9wcmlzbWEnO1xuXG4vLyBSZXRyeSBjb25maWd1cmF0aW9uIGZvciBkYXRhYmFzZSBvcGVyYXRpb25zXG5jb25zdCBSRVRSWV9DT05GSUcgPSB7XG4gIG1heEF0dGVtcHRzOiAzLFxuICBiYXNlRGVsYXk6IDEwMDAsIC8vIDEgc2Vjb25kXG4gIG1heERlbGF5OiA1MDAwLCAgLy8gNSBzZWNvbmRzXG59O1xuXG4vLyBFeHBvbmVudGlhbCBiYWNrb2ZmIGRlbGF5XG5jb25zdCBnZXREZWxheSA9IChhdHRlbXB0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBkZWxheSA9IFJFVFJZX0NPTkZJRy5iYXNlRGVsYXkgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSk7XG4gIHJldHVybiBNYXRoLm1pbihkZWxheSwgUkVUUllfQ09ORklHLm1heERlbGF5KTtcbn07XG5cbi8vIENoZWNrIGlmIGVycm9yIGlzIHJldHJ5YWJsZVxuY29uc3QgaXNSZXRyeWFibGVFcnJvciA9IChlcnJvcjogYW55KTogYm9vbGVhbiA9PiB7XG4gIGlmICghZXJyb3IpIHJldHVybiBmYWxzZTtcbiAgXG4gIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8ICcnO1xuICBjb25zdCBjb2RlID0gZXJyb3IuY29kZSB8fCAnJztcbiAgXG4gIC8vIFJldHJ5IG9uIFwiRW5naW5lIGlzIG5vdCB5ZXQgY29ubmVjdGVkXCIgZXJyb3JzIChjb21tb24gd2l0aCBwb29sZXIpXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdFbmdpbmUgaXMgbm90IHlldCBjb25uZWN0ZWQnKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICAvLyBSZXRyeSBvbiBwcmVwYXJlZCBzdGF0ZW1lbnQgZXJyb3JzIChTdXBhYmFzZSBjb25uZWN0aW9uIGlzc3VlcylcbiAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ3ByZXBhcmVkIHN0YXRlbWVudCcpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ2RvZXMgbm90IGV4aXN0JykpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLy8gUmV0cnkgb24gY29ubmVjdGlvbiBlcnJvcnNcbiAgaWYgKGNvZGUgPT09ICdQMTAwMScgfHwgY29kZSA9PT0gJ1AxMDA4JyB8fCBjb2RlID09PSAnUDEwMTcnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIC8vIFJldHJ5IG9uIHRpbWVvdXQgZXJyb3JzXG4gIGlmIChjb2RlID09PSAnUDIwMjQnIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fCBtZXNzYWdlLmluY2x1ZGVzKCdjb25uZWN0aW9uIHBvb2wnKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vLyBHZW5lcmljIHJldHJ5IHdyYXBwZXIgZm9yIGRhdGFiYXNlIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoUmV0cnk8VD4oXG4gIG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgY29udGV4dDogc3RyaW5nID0gJ2RhdGFiYXNlIG9wZXJhdGlvbidcbik6IFByb21pc2U8VD4ge1xuICAvLyBDaGVjayBpZiBQcmlzbWEgY2xpZW50IGlzIGF2YWlsYWJsZVxuICBpZiAoIXByaXNtYSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGV4ZWN1dGUgJHtjb250ZXh0fSAtIFByaXNtYSBjbGllbnQgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50YCk7XG4gIH1cblxuICBsZXQgbGFzdEVycm9yOiBhbnk7XG4gIFxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBSRVRSWV9DT05GSUcubWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yO1xuICAgICAgXG4gICAgICBpZiAoYXR0ZW1wdCA9PT0gUkVUUllfQ09ORklHLm1heEF0dGVtcHRzIHx8ICFpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgJHtjb250ZXh0fSBmYWlsZWQgYWZ0ZXIgJHthdHRlbXB0fSBhdHRlbXB0czpgLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAke2NvbnRleHR9IGZhaWxlZCAoYXR0ZW1wdCAke2F0dGVtcHR9LyR7UkVUUllfQ09ORklHLm1heEF0dGVtcHRzfSksIHJldHJ5aW5nLi4uYCwgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBXYWl0IGJlZm9yZSByZXRyeWluZ1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGdldERlbGF5KGF0dGVtcHQpKSk7XG4gICAgICBcbiAgICAgIC8vIEZvciBjb25uZWN0aW9uIGVycm9ycywgdHJ5IHRvIHJlZnJlc2ggdGhlIGNvbm5lY3Rpb25cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlICYmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdwcmVwYXJlZCBzdGF0ZW1lbnQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFbmdpbmUgaXMgbm90IHlldCBjb25uZWN0ZWQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdjb25uZWN0aW9uIHBvb2wnKSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQgQXR0ZW1wdGluZyB0byByZWZyZXNoIFByaXNtYSBjb25uZWN0aW9uLi4uJyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KCk7XG4gICAgICAgICAgYXdhaXQgcHJpc21hLiRjb25uZWN0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBQcmlzbWEgY29ubmVjdGlvbiByZWZyZXNoZWQnKTtcbiAgICAgICAgfSBjYXRjaCAocmVmcmVzaEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRmFpbGVkIHRvIHJlZnJlc2ggUHJpc21hIGNvbm5lY3Rpb246JywgcmVmcmVzaEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgdGhyb3cgbGFzdEVycm9yO1xufVxuXG4vLyBDcmVhdGUgZGF0YWJhc2Ugb3BlcmF0aW9ucyB3cmFwcGVyXG5jb25zdCBjcmVhdGVEYldyYXBwZXIgPSAoKSA9PiB7XG4gIGlmICghcHJpc21hKSB7XG4gICAgY29uc29sZS53YXJuKCfimqDvuI8gUHJpc21hIGNsaWVudCBub3QgYXZhaWxhYmxlIC0gcnVubmluZyBpbiBicm93c2VyL0VkZ2UgcnVudGltZScpO1xuICAgIC8vIFJldHVybiBkdW1teSBkYiBvYmplY3QgZm9yIGJ1aWxkLXRpbWUgY29tcGF0aWJpbGl0eVxuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiB7IFxuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLCBcbiAgICAgICAgZmluZFVuaXF1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLCBcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICAgdXBkYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBjcmVhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKVxuICAgICAgfSxcbiAgICAgIHByb3ZpZGVyOiB7IFxuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLCBcbiAgICAgICAgZmluZFVuaXF1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLCBcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICAgY3JlYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIHVwZGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBkZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgdXBzZXJ0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICB9LFxuICAgICAgYm9va2luZzogeyBcbiAgICAgICAgZmluZEZpcnN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksIFxuICAgICAgICBmaW5kTWFueTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSwgXG4gICAgICAgIGZpbmRVbmlxdWU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGNvdW50OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoMCksXG4gICAgICAgIGNyZWF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICB1cGRhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgYWdncmVnYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBfc3VtOiB7IHRvdGFsQW1vdW50OiAwIH0sIF9hdmc6IHsgdG90YWxBbW91bnQ6IDAgfSB9KSxcbiAgICAgIH0sXG4gICAgICBwYXltZW50OiB7IFxuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLCBcbiAgICAgICAgZmluZFVuaXF1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLCBcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSwgXG4gICAgICAgIGNyZWF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICB1cGRhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZGVsZXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGFnZ3JlZ2F0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgX3N1bTogeyBhbW91bnQ6IDAgfSwgX2F2ZzogeyByYXRpbmc6IDAgfSB9KSBcbiAgICAgIH0sXG4gICAgICBub3RpZmljYXRpb246IHtcbiAgICAgICAgZmluZEZpcnN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLFxuICAgICAgICBmaW5kVW5pcXVlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGNvdW50OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoMCksIFxuICAgICAgICBjcmVhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgdXBkYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIHVwZGF0ZU1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGNvdW50OiAwIH0pLFxuICAgICAgICBkZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZGVsZXRlTWFueTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgY291bnQ6IDAgfSksXG4gICAgICB9LFxuICAgICAgY2F0YWxvZ3VlSXRlbToge1xuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZmluZE1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZShbXSksXG4gICAgICAgIGZpbmRVbmlxdWU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICAgY3JlYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIHVwZGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBkZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgdXBzZXJ0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICB9LFxuICAgICAgcmV2aWV3OiB7IFxuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLCBcbiAgICAgICAgZmluZFVuaXF1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLCBcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSwgXG4gICAgICAgIGFnZ3JlZ2F0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgX3N1bTogeyBhbW91bnQ6IDAgfSwgX2F2ZzogeyByYXRpbmc6IDAgfSB9KSBcbiAgICAgIH0sXG4gICAgICBwYXlvdXQ6IHsgXG4gICAgICAgIGZpbmRGaXJzdDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLCBcbiAgICAgICAgZmluZE1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZShbXSksIFxuICAgICAgICBmaW5kVW5pcXVlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksIFxuICAgICAgICBjb3VudDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKDApLFxuICAgICAgICBjcmVhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgdXBkYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpXG4gICAgICB9LFxuICAgICAgc2VydmljZTogeyBcbiAgICAgICAgZmluZEZpcnN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksIFxuICAgICAgICBmaW5kTWFueTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSwgXG4gICAgICAgIGZpbmRVbmlxdWU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGNvdW50OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoMCkgXG4gICAgICB9LFxuICAgICAgc2VydmljZUNhdGVnb3J5OiB7IFxuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLCBcbiAgICAgICAgZmluZFVuaXF1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLCBcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICAgY3JlYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIHVwZGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBkZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKVxuICAgICAgfSxcbiAgICAgIHByb3ZpZGVyU2VydmljZTogeyBcbiAgICAgICAgZmluZEZpcnN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksIFxuICAgICAgICBmaW5kTWFueTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSwgXG4gICAgICAgIGZpbmRVbmlxdWU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSwgXG4gICAgICAgIGNvdW50OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoMCksXG4gICAgICAgIGNyZWF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBjcmVhdGVNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBjb3VudDogMCB9KSxcbiAgICAgICAgdXBkYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBkZWxldGVNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBjb3VudDogMCB9KVxuICAgICAgfSxcbiAgICAgIHZlcmlmaWNhdGlvblRva2VuOiB7XG4gICAgICAgIGZpbmRGaXJzdDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBmaW5kTWFueTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSxcbiAgICAgICAgZmluZFVuaXF1ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBjb3VudDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKDApLFxuICAgICAgICBjcmVhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZGVsZXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZU1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGNvdW50OiAwIH0pLFxuICAgICAgfSxcbiAgICAgIHBhc3N3b3JkUmVzZXRUb2tlbjoge1xuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZmluZE1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZShbXSksXG4gICAgICAgIGZpbmRVbmlxdWU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICAgY3JlYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICBkZWxldGVNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBjb3VudDogMCB9KSxcbiAgICAgIH0sXG4gICAgICBib29raW5nRHJhZnQ6IHtcbiAgICAgICAgZmluZEZpcnN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGZpbmRNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLFxuICAgICAgICBmaW5kVW5pcXVlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGNvdW50OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoMCksXG4gICAgICAgIGNyZWF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICB1cGRhdGU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZGVsZXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZU1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGNvdW50OiAwIH0pLFxuICAgICAgfSxcbiAgICAgIG5vdGlmaWNhdGlvbjoge1xuICAgICAgICBmaW5kRmlyc3Q6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgZmluZE1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZShbXSksXG4gICAgICAgIGZpbmRVbmlxdWU6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgICAgY291bnQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICAgY3JlYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIHVwZGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgICAgICB1cGRhdGVNYW55OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBjb3VudDogMCB9KSxcbiAgICAgICAgZGVsZXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgICAgIGRlbGV0ZU1hbnk6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGNvdW50OiAwIH0pLFxuICAgICAgfSxcbiAgICAgICR0cmFuc2FjdGlvbjogKGNhbGxiYWNrOiBhbnkpID0+IFByb21pc2UucmVzb2x2ZShjYWxsYmFjayh7fSkpLFxuICAgICAgJHF1ZXJ5UmF3OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW10pLFxuICAgICAgJGV4ZWN1dGVSYXc6ICgpID0+IFByb21pc2UucmVzb2x2ZSgwKSxcbiAgICAgICRkaXNjb25uZWN0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJuIHJlYWwgZGIgd3JhcHBlciB3aXRoIHJldHJ5IGxvZ2ljXG4gIHJldHVybiB7XG4gICAgLy8gVXNlciBvcGVyYXRpb25zXG4gICAgdXNlcjoge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnVzZXIuZmluZEZpcnN0KGFyZ3MpLCAndXNlci5maW5kRmlyc3QnKSxcbiAgICAgIGZpbmRNYW55OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnVzZXIuZmluZE1hbnkoYXJncyksICd1c2VyLmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnVzZXIuZmluZFVuaXF1ZShhcmdzKSwgJ3VzZXIuZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEudXNlci5jb3VudChhcmdzKSwgJ3VzZXIuY291bnQnKSxcbiAgICAgIHVwZGF0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS51c2VyLnVwZGF0ZShhcmdzKSwgJ3VzZXIudXBkYXRlJyksXG4gICAgICBkZWxldGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEudXNlci5kZWxldGUoYXJncyksICd1c2VyLmRlbGV0ZScpLFxuICAgICAgY3JlYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnVzZXIuY3JlYXRlKGFyZ3MpLCAndXNlci5jcmVhdGUnKSxcbiAgICB9LFxuICAgIFxuICAgIC8vIFByb3ZpZGVyIG9wZXJhdGlvbnNcbiAgICBwcm92aWRlcjoge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyLmZpbmRGaXJzdChhcmdzKSwgJ3Byb3ZpZGVyLmZpbmRGaXJzdCcpLFxuICAgICAgZmluZE1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXIuZmluZE1hbnkoYXJncyksICdwcm92aWRlci5maW5kTWFueScpLFxuICAgICAgZmluZFVuaXF1ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wcm92aWRlci5maW5kVW5pcXVlKGFyZ3MpLCAncHJvdmlkZXIuZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXIuY291bnQoYXJncyksICdwcm92aWRlci5jb3VudCcpLFxuICAgICAgY3JlYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyLmNyZWF0ZShhcmdzKSwgJ3Byb3ZpZGVyLmNyZWF0ZScpLFxuICAgICAgdXBkYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyLnVwZGF0ZShhcmdzKSwgJ3Byb3ZpZGVyLnVwZGF0ZScpLFxuICAgICAgZGVsZXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyLmRlbGV0ZShhcmdzKSwgJ3Byb3ZpZGVyLmRlbGV0ZScpLFxuICAgICAgdXBzZXJ0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyLnVwc2VydChhcmdzKSwgJ3Byb3ZpZGVyLnVwc2VydCcpLFxuICAgIH0sXG4gICAgXG4gICAgLy8gQm9va2luZyBvcGVyYXRpb25zXG4gICAgYm9va2luZzoge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmcuZmluZEZpcnN0KGFyZ3MpLCAnYm9va2luZy5maW5kRmlyc3QnKSxcbiAgICAgIGZpbmRNYW55OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmcuZmluZE1hbnkoYXJncyksICdib29raW5nLmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmcuZmluZFVuaXF1ZShhcmdzKSwgJ2Jvb2tpbmcuZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuYm9va2luZy5jb3VudChhcmdzKSwgJ2Jvb2tpbmcuY291bnQnKSxcbiAgICAgIGNyZWF0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5ib29raW5nLmNyZWF0ZShhcmdzKSwgJ2Jvb2tpbmcuY3JlYXRlJyksXG4gICAgICB1cGRhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuYm9va2luZy51cGRhdGUoYXJncyksICdib29raW5nLnVwZGF0ZScpLFxuICAgICAgYWdncmVnYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmcuYWdncmVnYXRlKGFyZ3MpLCAnYm9va2luZy5hZ2dyZWdhdGUnKSxcbiAgICB9LFxuICAgIFxuICAgIC8vIFBheW1lbnQgb3BlcmF0aW9uc1xuICAgIHBheW1lbnQ6IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXltZW50LmZpbmRGaXJzdChhcmdzKSwgJ3BheW1lbnQuZmluZEZpcnN0JyksXG4gICAgICBmaW5kTWFueTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXltZW50LmZpbmRNYW55KGFyZ3MpLCAncGF5bWVudC5maW5kTWFueScpLFxuICAgICAgZmluZFVuaXF1ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXltZW50LmZpbmRVbmlxdWUoYXJncyksICdwYXltZW50LmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBheW1lbnQuY291bnQoYXJncyksICdwYXltZW50LmNvdW50JyksXG4gICAgICBjcmVhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGF5bWVudC5jcmVhdGUoYXJncyksICdwYXltZW50LmNyZWF0ZScpLFxuICAgICAgdXBkYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBheW1lbnQudXBkYXRlKGFyZ3MpLCAncGF5bWVudC51cGRhdGUnKSxcbiAgICAgIGRlbGV0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXltZW50LmRlbGV0ZShhcmdzKSwgJ3BheW1lbnQuZGVsZXRlJyksXG4gICAgICBhZ2dyZWdhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGF5bWVudC5hZ2dyZWdhdGUoYXJncyksICdwYXltZW50LmFnZ3JlZ2F0ZScpLFxuICAgIH0sXG4gICAgXG4gICAgLy8gUmV2aWV3IG9wZXJhdGlvbnNcbiAgICByZXZpZXc6IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5yZXZpZXcuZmluZEZpcnN0KGFyZ3MpLCAncmV2aWV3LmZpbmRGaXJzdCcpLFxuICAgICAgZmluZE1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucmV2aWV3LmZpbmRNYW55KGFyZ3MpLCAncmV2aWV3LmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnJldmlldy5maW5kVW5pcXVlKGFyZ3MpLCAncmV2aWV3LmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnJldmlldy5jb3VudChhcmdzKSwgJ3Jldmlldy5jb3VudCcpLFxuICAgICAgYWdncmVnYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnJldmlldy5hZ2dyZWdhdGUoYXJncyksICdyZXZpZXcuYWdncmVnYXRlJyksXG4gICAgfSxcbiAgICBcbiAgICAvLyBOb3RpZmljYXRpb24gb3BlcmF0aW9uc1xuICAgIG5vdGlmaWNhdGlvbjoge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLm5vdGlmaWNhdGlvbi5maW5kRmlyc3QoYXJncyksICdub3RpZmljYXRpb24uZmluZEZpcnN0JyksXG4gICAgICBmaW5kTWFueTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5ub3RpZmljYXRpb24uZmluZE1hbnkoYXJncyksICdub3RpZmljYXRpb24uZmluZE1hbnknKSxcbiAgICAgIGZpbmRVbmlxdWU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEubm90aWZpY2F0aW9uLmZpbmRVbmlxdWUoYXJncyksICdub3RpZmljYXRpb24uZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEubm90aWZpY2F0aW9uLmNvdW50KGFyZ3MpLCAnbm90aWZpY2F0aW9uLmNvdW50JyksXG4gICAgICBjcmVhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEubm90aWZpY2F0aW9uLmNyZWF0ZShhcmdzKSwgJ25vdGlmaWNhdGlvbi5jcmVhdGUnKSxcbiAgICAgIHVwZGF0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5ub3RpZmljYXRpb24udXBkYXRlKGFyZ3MpLCAnbm90aWZpY2F0aW9uLnVwZGF0ZScpLFxuICAgICAgdXBkYXRlTWFueTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5ub3RpZmljYXRpb24udXBkYXRlTWFueShhcmdzKSwgJ25vdGlmaWNhdGlvbi51cGRhdGVNYW55JyksXG4gICAgICBkZWxldGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEubm90aWZpY2F0aW9uLmRlbGV0ZShhcmdzKSwgJ25vdGlmaWNhdGlvbi5kZWxldGUnKSxcbiAgICAgIGRlbGV0ZU1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEubm90aWZpY2F0aW9uLmRlbGV0ZU1hbnkoYXJncyksICdub3RpZmljYXRpb24uZGVsZXRlTWFueScpLFxuICAgIH0sXG4gICAgXG4gICAgLy8gUGF5b3V0IG9wZXJhdGlvbnNcbiAgICBwYXlvdXQ6IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXlvdXQuZmluZEZpcnN0KGFyZ3MpLCAncGF5b3V0LmZpbmRGaXJzdCcpLFxuICAgICAgZmluZE1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGF5b3V0LmZpbmRNYW55KGFyZ3MpLCAncGF5b3V0LmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBheW91dC5maW5kVW5pcXVlKGFyZ3MpLCAncGF5b3V0LmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBheW91dC5jb3VudChhcmdzKSwgJ3BheW91dC5jb3VudCcpLFxuICAgICAgY3JlYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBheW91dC5jcmVhdGUoYXJncyksICdwYXlvdXQuY3JlYXRlJyksXG4gICAgICB1cGRhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGF5b3V0LnVwZGF0ZShhcmdzKSwgJ3BheW91dC51cGRhdGUnKSxcbiAgICAgIGRlbGV0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXlvdXQuZGVsZXRlKGFyZ3MpLCAncGF5b3V0LmRlbGV0ZScpLFxuICAgIH0sXG4gICAgXG4gICAgLy8gU2VydmljZSBvcGVyYXRpb25zXG4gICAgc2VydmljZToge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnNlcnZpY2UuZmluZEZpcnN0KGFyZ3MpLCAnc2VydmljZS5maW5kRmlyc3QnKSxcbiAgICAgIGZpbmRNYW55OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnNlcnZpY2UuZmluZE1hbnkoYXJncyksICdzZXJ2aWNlLmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnNlcnZpY2UuZmluZFVuaXF1ZShhcmdzKSwgJ3NlcnZpY2UuZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuc2VydmljZS5jb3VudChhcmdzKSwgJ3NlcnZpY2UuY291bnQnKSxcbiAgICB9LFxuXG4gICAgLy8gU2VydmljZUNhdGVnb3J5IG9wZXJhdGlvbnNcbiAgICBzZXJ2aWNlQ2F0ZWdvcnk6IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5zZXJ2aWNlQ2F0ZWdvcnkuZmluZEZpcnN0KGFyZ3MpLCAnc2VydmljZUNhdGVnb3J5LmZpbmRGaXJzdCcpLFxuICAgICAgZmluZE1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuc2VydmljZUNhdGVnb3J5LmZpbmRNYW55KGFyZ3MpLCAnc2VydmljZUNhdGVnb3J5LmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnNlcnZpY2VDYXRlZ29yeS5maW5kVW5pcXVlKGFyZ3MpLCAnc2VydmljZUNhdGVnb3J5LmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnNlcnZpY2VDYXRlZ29yeS5jb3VudChhcmdzKSwgJ3NlcnZpY2VDYXRlZ29yeS5jb3VudCcpLFxuICAgICAgY3JlYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnNlcnZpY2VDYXRlZ29yeS5jcmVhdGUoYXJncyksICdzZXJ2aWNlQ2F0ZWdvcnkuY3JlYXRlJyksXG4gICAgICB1cGRhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuc2VydmljZUNhdGVnb3J5LnVwZGF0ZShhcmdzKSwgJ3NlcnZpY2VDYXRlZ29yeS51cGRhdGUnKSxcbiAgICAgIGRlbGV0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5zZXJ2aWNlQ2F0ZWdvcnkuZGVsZXRlKGFyZ3MpLCAnc2VydmljZUNhdGVnb3J5LmRlbGV0ZScpLFxuICAgIH0sXG5cbiAgICAvLyBQcm92aWRlclNlcnZpY2Ugb3BlcmF0aW9uc1xuICAgIHByb3ZpZGVyU2VydmljZToge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyU2VydmljZS5maW5kRmlyc3QoYXJncyksICdwcm92aWRlclNlcnZpY2UuZmluZEZpcnN0JyksXG4gICAgICBmaW5kTWFueTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wcm92aWRlclNlcnZpY2UuZmluZE1hbnkoYXJncyksICdwcm92aWRlclNlcnZpY2UuZmluZE1hbnknKSxcbiAgICAgIGZpbmRVbmlxdWU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXJTZXJ2aWNlLmZpbmRVbmlxdWUoYXJncyksICdwcm92aWRlclNlcnZpY2UuZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXJTZXJ2aWNlLmNvdW50KGFyZ3MpLCAncHJvdmlkZXJTZXJ2aWNlLmNvdW50JyksXG4gICAgICBjcmVhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXJTZXJ2aWNlLmNyZWF0ZShhcmdzKSwgJ3Byb3ZpZGVyU2VydmljZS5jcmVhdGUnKSxcbiAgICAgIGNyZWF0ZU1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXJTZXJ2aWNlLmNyZWF0ZU1hbnkoYXJncyksICdwcm92aWRlclNlcnZpY2UuY3JlYXRlTWFueScpLFxuICAgICAgdXBkYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnByb3ZpZGVyU2VydmljZS51cGRhdGUoYXJncyksICdwcm92aWRlclNlcnZpY2UudXBkYXRlJyksXG4gICAgICBkZWxldGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXJTZXJ2aWNlLmRlbGV0ZShhcmdzKSwgJ3Byb3ZpZGVyU2VydmljZS5kZWxldGUnKSxcbiAgICAgIGRlbGV0ZU1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucHJvdmlkZXJTZXJ2aWNlLmRlbGV0ZU1hbnkoYXJncyksICdwcm92aWRlclNlcnZpY2UuZGVsZXRlTWFueScpLFxuICAgIH0sXG4gICAgXG5cbiAgICAvLyBWZXJpZmljYXRpb25Ub2tlbiBvcGVyYXRpb25zXG4gICAgdmVyaWZpY2F0aW9uVG9rZW46IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS52ZXJpZmljYXRpb25Ub2tlbi5maW5kRmlyc3QoYXJncyksICd2ZXJpZmljYXRpb25Ub2tlbi5maW5kRmlyc3QnKSxcbiAgICAgIGZpbmRNYW55OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnZlcmlmaWNhdGlvblRva2VuLmZpbmRNYW55KGFyZ3MpLCAndmVyaWZpY2F0aW9uVG9rZW4uZmluZE1hbnknKSxcbiAgICAgIGZpbmRVbmlxdWU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEudmVyaWZpY2F0aW9uVG9rZW4uZmluZFVuaXF1ZShhcmdzKSwgJ3ZlcmlmaWNhdGlvblRva2VuLmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnZlcmlmaWNhdGlvblRva2VuLmNvdW50KGFyZ3MpLCAndmVyaWZpY2F0aW9uVG9rZW4uY291bnQnKSxcbiAgICAgIGNyZWF0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS52ZXJpZmljYXRpb25Ub2tlbi5jcmVhdGUoYXJncyksICd2ZXJpZmljYXRpb25Ub2tlbi5jcmVhdGUnKSxcbiAgICAgIGRlbGV0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS52ZXJpZmljYXRpb25Ub2tlbi5kZWxldGUoYXJncyksICd2ZXJpZmljYXRpb25Ub2tlbi5kZWxldGUnKSxcbiAgICAgIGRlbGV0ZU1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEudmVyaWZpY2F0aW9uVG9rZW4uZGVsZXRlTWFueShhcmdzKSwgJ3ZlcmlmaWNhdGlvblRva2VuLmRlbGV0ZU1hbnknKSxcbiAgICB9LFxuXG4gICAgLy8gUGFzc3dvcmRSZXNldFRva2VuIG9wZXJhdGlvbnNcbiAgICBwYXNzd29yZFJlc2V0VG9rZW46IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5wYXNzd29yZFJlc2V0VG9rZW4uZmluZEZpcnN0KGFyZ3MpLCAncGFzc3dvcmRSZXNldFRva2VuLmZpbmRGaXJzdCcpLFxuICAgICAgZmluZE1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGFzc3dvcmRSZXNldFRva2VuLmZpbmRNYW55KGFyZ3MpLCAncGFzc3dvcmRSZXNldFRva2VuLmZpbmRNYW55JyksXG4gICAgICBmaW5kVW5pcXVlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBhc3N3b3JkUmVzZXRUb2tlbi5maW5kVW5pcXVlKGFyZ3MpLCAncGFzc3dvcmRSZXNldFRva2VuLmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBhc3N3b3JkUmVzZXRUb2tlbi5jb3VudChhcmdzKSwgJ3Bhc3N3b3JkUmVzZXRUb2tlbi5jb3VudCcpLFxuICAgICAgY3JlYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLnBhc3N3b3JkUmVzZXRUb2tlbi5jcmVhdGUoYXJncyksICdwYXNzd29yZFJlc2V0VG9rZW4uY3JlYXRlJyksXG4gICAgICBkZWxldGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGFzc3dvcmRSZXNldFRva2VuLmRlbGV0ZShhcmdzKSwgJ3Bhc3N3b3JkUmVzZXRUb2tlbi5kZWxldGUnKSxcbiAgICAgIGRlbGV0ZU1hbnk6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEucGFzc3dvcmRSZXNldFRva2VuLmRlbGV0ZU1hbnkoYXJncyksICdwYXNzd29yZFJlc2V0VG9rZW4uZGVsZXRlTWFueScpLFxuICAgIH0sXG5cbiAgICAvLyBCb29raW5nRHJhZnQgb3BlcmF0aW9uc1xuICAgIGJvb2tpbmdEcmFmdDoge1xuICAgICAgZmluZEZpcnN0OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmdEcmFmdC5maW5kRmlyc3QoYXJncyksICdib29raW5nRHJhZnQuZmluZEZpcnN0JyksXG4gICAgICBmaW5kTWFueTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5ib29raW5nRHJhZnQuZmluZE1hbnkoYXJncyksICdib29raW5nRHJhZnQuZmluZE1hbnknKSxcbiAgICAgIGZpbmRVbmlxdWU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuYm9va2luZ0RyYWZ0LmZpbmRVbmlxdWUoYXJncyksICdib29raW5nRHJhZnQuZmluZFVuaXF1ZScpLFxuICAgICAgY291bnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuYm9va2luZ0RyYWZ0LmNvdW50KGFyZ3MpLCAnYm9va2luZ0RyYWZ0LmNvdW50JyksXG4gICAgICBjcmVhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuYm9va2luZ0RyYWZ0LmNyZWF0ZShhcmdzKSwgJ2Jvb2tpbmdEcmFmdC5jcmVhdGUnKSxcbiAgICAgIHVwZGF0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5ib29raW5nRHJhZnQudXBkYXRlKGFyZ3MpLCAnYm9va2luZ0RyYWZ0LnVwZGF0ZScpLFxuICAgICAgZGVsZXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmdEcmFmdC5kZWxldGUoYXJncyksICdib29raW5nRHJhZnQuZGVsZXRlJyksXG4gICAgICBkZWxldGVNYW55OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmJvb2tpbmdEcmFmdC5kZWxldGVNYW55KGFyZ3MpLCAnYm9va2luZ0RyYWZ0LmRlbGV0ZU1hbnknKSxcbiAgICB9LFxuICAgIFxuICAgIC8vIENhdGFsb2d1ZUl0ZW0gb3BlcmF0aW9uc1xuICAgIGNhdGFsb2d1ZUl0ZW06IHtcbiAgICAgIGZpbmRGaXJzdDogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5jYXRhbG9ndWVJdGVtLmZpbmRGaXJzdChhcmdzKSwgJ2NhdGFsb2d1ZUl0ZW0uZmluZEZpcnN0JyksXG4gICAgICBmaW5kTWFueTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5jYXRhbG9ndWVJdGVtLmZpbmRNYW55KGFyZ3MpLCAnY2F0YWxvZ3VlSXRlbS5maW5kTWFueScpLFxuICAgICAgZmluZFVuaXF1ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5jYXRhbG9ndWVJdGVtLmZpbmRVbmlxdWUoYXJncyksICdjYXRhbG9ndWVJdGVtLmZpbmRVbmlxdWUnKSxcbiAgICAgIGNvdW50OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmNhdGFsb2d1ZUl0ZW0uY291bnQoYXJncyksICdjYXRhbG9ndWVJdGVtLmNvdW50JyksXG4gICAgICBjcmVhdGU6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuY2F0YWxvZ3VlSXRlbS5jcmVhdGUoYXJncyksICdjYXRhbG9ndWVJdGVtLmNyZWF0ZScpLFxuICAgICAgdXBkYXRlOiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLmNhdGFsb2d1ZUl0ZW0udXBkYXRlKGFyZ3MpLCAnY2F0YWxvZ3VlSXRlbS51cGRhdGUnKSxcbiAgICAgIGRlbGV0ZTogKGFyZ3M6IGFueSkgPT4gd2l0aFJldHJ5KCgpID0+IHByaXNtYS5jYXRhbG9ndWVJdGVtLmRlbGV0ZShhcmdzKSwgJ2NhdGFsb2d1ZUl0ZW0uZGVsZXRlJyksXG4gICAgICB1cHNlcnQ6IChhcmdzOiBhbnkpID0+IHdpdGhSZXRyeSgoKSA9PiBwcmlzbWEuY2F0YWxvZ3VlSXRlbS51cHNlcnQoYXJncyksICdjYXRhbG9ndWVJdGVtLnVwc2VydCcpLFxuICAgIH0sXG4gICAgXG4gICAgLy8gVHJhbnNhY3Rpb24gb3BlcmF0aW9uc1xuICAgICR0cmFuc2FjdGlvbjogYXN5bmMgKGNhbGxiYWNrOiBhbnkpID0+IHtcbiAgICAgIC8vIEZvciB0cmFuc2FjdGlvbnMsIHdlIG5lZWQgdG8gaGFuZGxlIHJldHJpZXMgZGlmZmVyZW50bHlcbiAgICAgIC8vIGJlY2F1c2UgdGhlIGNhbGxiYWNrIG5lZWRzIHRvIHJlY2VpdmUgdGhlIHRyYW5zYWN0aW9uIG9iamVjdFxuICAgICAgbGV0IGxhc3RFcnJvcjogYW55O1xuICAgICAgXG4gICAgICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBSRVRSWV9DT05GSUcubWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGNhbGxiYWNrKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoYXR0ZW1wdCA9PT0gUkVUUllfQ09ORklHLm1heEF0dGVtcHRzIHx8ICFpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIGRiLiR0cmFuc2FjdGlvbiBmYWlsZWQgYWZ0ZXIgJHthdHRlbXB0fSBhdHRlbXB0czpgLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gZGIuJHRyYW5zYWN0aW9uIGZhaWxlZCAoYXR0ZW1wdCAke2F0dGVtcHR9LyR7UkVUUllfQ09ORklHLm1heEF0dGVtcHRzfSksIHJldHJ5aW5nLi4uYCwgZXJyb3IpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5aW5nXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGdldERlbGF5KGF0dGVtcHQpKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRm9yIGNvbm5lY3Rpb24gZXJyb3JzLCB0cnkgdG8gcmVmcmVzaCB0aGUgY29ubmVjdGlvblxuICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlICYmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdwcmVwYXJlZCBzdGF0ZW1lbnQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFbmdpbmUgaXMgbm90IHlldCBjb25uZWN0ZWQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdjb25uZWN0aW9uIHBvb2wnKSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIEF0dGVtcHRpbmcgdG8gcmVmcmVzaCBQcmlzbWEgY29ubmVjdGlvbi4uLicpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgIGF3YWl0IHByaXNtYS4kY29ubmVjdCgpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFByaXNtYSBjb25uZWN0aW9uIHJlZnJlc2hlZCcpO1xuICAgICAgICAgICAgfSBjYXRjaCAocmVmcmVzaEVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEZhaWxlZCB0byByZWZyZXNoIFByaXNtYSBjb25uZWN0aW9uOicsIHJlZnJlc2hFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IGxhc3RFcnJvcjtcbiAgICB9LFxuICAgIFxuICAgIC8vIFJhdyBxdWVyeSBvcGVyYXRpb25zXG4gICAgJHF1ZXJ5UmF3OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLiRxdWVyeVJhdyhhcmdzKSwgJ2RiLiRxdWVyeVJhdycpLFxuICAgICRleGVjdXRlUmF3OiAoYXJnczogYW55KSA9PiB3aXRoUmV0cnkoKCkgPT4gcHJpc21hLiRleGVjdXRlUmF3KGFyZ3MpLCAnZGIuJGV4ZWN1dGVSYXcnKSxcbiAgICAkZGlzY29ubmVjdDogKCkgPT4gcHJpc21hLiRkaXNjb25uZWN0KCksXG4gIH07XG59O1xuXG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgZGF0YWJhc2Ugd3JhcHBlclxuZXhwb3J0IGNvbnN0IGRiID0gY3JlYXRlRGJXcmFwcGVyKCk7Il0sIm5hbWVzIjpbInByaXNtYSIsIlJFVFJZX0NPTkZJRyIsIm1heEF0dGVtcHRzIiwiYmFzZURlbGF5IiwibWF4RGVsYXkiLCJnZXREZWxheSIsImF0dGVtcHQiLCJkZWxheSIsIk1hdGgiLCJwb3ciLCJtaW4iLCJpc1JldHJ5YWJsZUVycm9yIiwiZXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImluY2x1ZGVzIiwid2l0aFJldHJ5Iiwib3BlcmF0aW9uIiwiY29udGV4dCIsIkVycm9yIiwibGFzdEVycm9yIiwiY29uc29sZSIsIndhcm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJsb2ciLCIkZGlzY29ubmVjdCIsIiRjb25uZWN0IiwicmVmcmVzaEVycm9yIiwiY3JlYXRlRGJXcmFwcGVyIiwidXNlciIsImZpbmRGaXJzdCIsImZpbmRNYW55IiwiZmluZFVuaXF1ZSIsImNvdW50IiwidXBkYXRlIiwiZGVsZXRlIiwiY3JlYXRlIiwicHJvdmlkZXIiLCJ1cHNlcnQiLCJib29raW5nIiwiYWdncmVnYXRlIiwiX3N1bSIsInRvdGFsQW1vdW50IiwiX2F2ZyIsInBheW1lbnQiLCJhbW91bnQiLCJyYXRpbmciLCJub3RpZmljYXRpb24iLCJ1cGRhdGVNYW55IiwiZGVsZXRlTWFueSIsImNhdGFsb2d1ZUl0ZW0iLCJyZXZpZXciLCJwYXlvdXQiLCJzZXJ2aWNlIiwic2VydmljZUNhdGVnb3J5IiwicHJvdmlkZXJTZXJ2aWNlIiwiY3JlYXRlTWFueSIsInZlcmlmaWNhdGlvblRva2VuIiwicGFzc3dvcmRSZXNldFRva2VuIiwiYm9va2luZ0RyYWZ0IiwiJHRyYW5zYWN0aW9uIiwiY2FsbGJhY2siLCIkcXVlcnlSYXciLCIkZXhlY3V0ZVJhdyIsImFyZ3MiLCJkYiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db-utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/notification-service.ts":
/*!*************************************!*\
  !*** ./lib/notification-service.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationTemplates: () => (/* binding */ NotificationTemplates),\n/* harmony export */   cleanupOldNotifications: () => (/* binding */ cleanupOldNotifications),\n/* harmony export */   createBulkNotifications: () => (/* binding */ createBulkNotifications),\n/* harmony export */   createNotification: () => (/* binding */ createNotification),\n/* harmony export */   getUnreadNotificationCount: () => (/* binding */ getUnreadNotificationCount),\n/* harmony export */   getUserNotifications: () => (/* binding */ getUserNotifications),\n/* harmony export */   markAllNotificationsAsRead: () => (/* binding */ markAllNotificationsAsRead),\n/* harmony export */   markNotificationAsRead: () => (/* binding */ markNotificationAsRead)\n/* harmony export */ });\n/* harmony import */ var _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db-utils */ \"(rsc)/./lib/db-utils.ts\");\n\n/**\r\n * Create a notification for a user\r\n */ async function createNotification(data) {\n    try {\n        const notification = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__.db.notification.create({\n            data: {\n                userId: data.userId,\n                type: data.type,\n                title: data.title,\n                message: data.content,\n                isRead: false\n            },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        console.log(`🔔 Notification created: ${data.type} for user ${data.userId}`);\n        return notification;\n    } catch (error) {\n        console.error(\"❌ Failed to create notification:\", error);\n        throw error;\n    }\n}\n/**\r\n * Create multiple notifications at once\r\n */ async function createBulkNotifications(notifications) {\n    try {\n        const createdNotifications = await Promise.all(notifications.map((notification)=>createNotification(notification)));\n        console.log(`🔔 Created ${createdNotifications.length} notifications`);\n        return createdNotifications;\n    } catch (error) {\n        console.error(\"❌ Failed to create bulk notifications:\", error);\n        throw error;\n    }\n}\n/**\r\n * Get notifications for a user\r\n */ async function getUserNotifications(userId, limit = 50) {\n    try {\n        const notifications = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__.db.notification.findMany({\n            where: {\n                userId\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: limit,\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        return notifications;\n    } catch (error) {\n        console.error(\"❌ Failed to get user notifications:\", error);\n        throw error;\n    }\n}\n/**\r\n * Mark notification as read\r\n */ async function markNotificationAsRead(notificationId, userId) {\n    try {\n        const notification = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__.db.notification.updateMany({\n            where: {\n                id: notificationId,\n                userId: userId\n            },\n            data: {\n                isRead: true\n            }\n        });\n        return notification;\n    } catch (error) {\n        console.error(\"❌ Failed to mark notification as read:\", error);\n        throw error;\n    }\n}\n/**\r\n * Mark all notifications as read for a user\r\n */ async function markAllNotificationsAsRead(userId) {\n    try {\n        const result = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__.db.notification.updateMany({\n            where: {\n                userId: userId,\n                isRead: false\n            },\n            data: {\n                isRead: true\n            }\n        });\n        console.log(`🔔 Marked ${result.count} notifications as read for user ${userId}`);\n        return result;\n    } catch (error) {\n        console.error(\"❌ Failed to mark all notifications as read:\", error);\n        throw error;\n    }\n}\n/**\r\n * Get unread notification count for a user\r\n */ async function getUnreadNotificationCount(userId) {\n    try {\n        const count = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__.db.notification.count({\n            where: {\n                userId: userId,\n                isRead: false\n            }\n        });\n        return count;\n    } catch (error) {\n        console.error(\"❌ Failed to get unread notification count:\", error);\n        return 0;\n    }\n}\n/**\r\n * Delete old notifications (cleanup)\r\n */ async function cleanupOldNotifications(daysOld = 30) {\n    try {\n        const cutoffDate = new Date();\n        cutoffDate.setDate(cutoffDate.getDate() - daysOld);\n        const result = await _lib_db_utils__WEBPACK_IMPORTED_MODULE_0__.db.notification.deleteMany({\n            where: {\n                createdAt: {\n                    lt: cutoffDate\n                },\n                isRead: true\n            }\n        });\n        console.log(`🧹 Cleaned up ${result.count} old notifications`);\n        return result;\n    } catch (error) {\n        console.error(\"❌ Failed to cleanup old notifications:\", error);\n        throw error;\n    }\n}\n/**\r\n * Notification templates for different actions\r\n */ const NotificationTemplates = {\n    BOOKING_CREATED: (booking)=>({\n            type: \"BOOKING_CREATED\",\n            title: \"New Booking Request\",\n            content: `You have a new booking request for ${booking.service?.name || \"service\"} from ${booking.client?.name || \"a client\"}. Please review and respond.`\n        }),\n    BOOKING_ACCEPTED: (booking)=>({\n            type: \"BOOKING_ACCEPTED\",\n            title: \"Booking Accepted!\",\n            content: `Great news! Your booking for ${booking.service?.name || \"service\"} has been accepted by ${booking.provider?.businessName || \"the provider\"}. You can now proceed with payment.`\n        }),\n    BOOKING_DECLINED: (booking)=>({\n            type: \"BOOKING_DECLINED\",\n            title: \"Booking Declined\",\n            content: `Unfortunately, your booking for ${booking.service?.name || \"service\"} was declined. Don't worry, you can try booking with another provider.`\n        }),\n    BOOKING_CANCELLED: (booking, cancelledBy)=>({\n            type: \"BOOKING_CANCELLED\",\n            title: \"Booking Cancelled\",\n            content: `Your booking for ${booking.service?.name || \"service\"} has been cancelled by ${cancelledBy === \"client\" ? \"the client\" : \"the provider\"}.`\n        }),\n    PAYMENT_RECEIVED: (booking)=>({\n            type: \"PAYMENT_RECEIVED\",\n            title: \"Payment Received\",\n            content: `Payment received for ${booking.service?.name || \"your service\"} - Booking #${booking.id}. You can now start the job!`\n        }),\n    PAYMENT_FAILED: (booking)=>({\n            type: \"PAYMENT_FAILED\",\n            title: \"Payment Failed\",\n            content: `Payment failed for ${booking.service?.name || \"service\"} - Booking #${booking.id}. Please try again or contact support.`\n        }),\n    JOB_STARTED: (booking)=>({\n            type: \"JOB_STARTED\",\n            title: \"Job Started\",\n            content: `Great news! ${booking.provider?.businessName || \"The provider\"} has started working on your ${booking.service?.name || \"service\"}.`\n        }),\n    JOB_COMPLETED: (booking)=>({\n            type: \"JOB_COMPLETED\",\n            title: \"Job Completed\",\n            content: `Your ${booking.service?.name || \"service\"} has been completed! Please review the work and confirm completion to release payment.`\n        }),\n    DISPUTE_CREATED: (booking, disputeType)=>({\n            type: \"DISPUTE_CREATED\",\n            title: \"Dispute Created\",\n            content: `A dispute has been created for booking #${booking.id} regarding ${disputeType}. Our team will review and resolve this issue.`\n        }),\n    DISPUTE_RESOLVED: (booking, resolution)=>({\n            type: \"DISPUTE_RESOLVED\",\n            title: \"Dispute Resolved\",\n            content: `The dispute for booking #${booking.id} has been resolved: ${resolution}`\n        }),\n    REVIEW_SUBMITTED: (booking, rating)=>({\n            type: \"REVIEW_SUBMITTED\",\n            title: \"Review Submitted\",\n            content: `A ${rating}-star review has been submitted for your service on booking #${booking.id}.`\n        }),\n    PAYMENT_RELEASED: (booking, amount)=>({\n            type: \"PAYMENT_RELEASED\",\n            title: \"Payment Released\",\n            content: `Payment of R${amount.toFixed(2)} has been released for booking #${booking.id}. The funds should appear in your account within 1-3 business days.`\n        }),\n    ESCROW_RELEASED: (booking, amount)=>({\n            type: \"ESCROW_RELEASED\",\n            title: \"Escrow Released\",\n            content: `Escrow payment of R${amount.toFixed(2)} has been released for booking #${booking.id}.`\n        }),\n    CATALOGUE_SETUP_REQUIRED: (provider, packageCount)=>({\n            type: \"CATALOGUE_SETUP_REQUIRED\",\n            title: \"\\uD83C\\uDF89 Your Service Packages Are Ready!\",\n            content: `We've created ${packageCount} starter packages for your services. Customize them now to start receiving bookings!`\n        }),\n    CATALOGUE_SETUP_COMPLETED: (provider, completionTime)=>({\n            type: \"CATALOGUE_SETUP_COMPLETED\",\n            title: \"\\uD83C\\uDF89 Setup Complete - You're Ready to Earn!\",\n            content: `Congratulations! You completed your service packages setup in ${completionTime}. You're now live and ready to receive bookings!`\n        }),\n    CATALOGUE_SETUP_REMINDER: (provider, daysSince)=>({\n            type: \"CATALOGUE_SETUP_REMINDER\",\n            title: \"\\uD83D\\uDCA1 Complete Your Service Packages\",\n            content: `Don't miss out on bookings! Complete your service packages setup to start earning. It's been ${daysSince} days since your packages were created.`\n        })\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixlQUEwQjtZQUNsRXJFLE1BQU07WUFDTkMsT0FBTztZQUNQRSxTQUFTLENBQUMsY0FBYyxFQUFFa0UsYUFBYSxvRkFBb0YsQ0FBQztRQUM5SDtJQUVBQywyQkFBMkIsQ0FBQ3JCLFVBQWVzQixpQkFBNEI7WUFDckV2RSxNQUFNO1lBQ05DLE9BQU87WUFDUEUsU0FBUyxDQUFDLDhEQUE4RCxFQUFFb0UsZUFBZSxnREFBZ0QsQ0FBQztRQUM1STtJQUVBQywwQkFBMEIsQ0FBQ3ZCLFVBQWV3QixZQUF1QjtZQUMvRHpFLE1BQU07WUFDTkMsT0FBTztZQUNQRSxTQUFTLENBQUMsNkZBQTZGLEVBQUVzRSxVQUFVLHVDQUF1QyxDQUFDO1FBQzdKO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvbm90aWZpY2F0aW9uLXNlcnZpY2UudHM/NjllOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYiB9IGZyb20gXCJAL2xpYi9kYi11dGlsc1wiXHJcblxyXG5leHBvcnQgdHlwZSBOb3RpZmljYXRpb25UeXBlID0gXHJcbiAgfCAnQk9PS0lOR19DUkVBVEVEJ1xyXG4gIHwgJ0JPT0tJTkdfQUNDRVBURUQnXHJcbiAgfCAnQk9PS0lOR19ERUNMSU5FRCdcclxuICB8ICdCT09LSU5HX0NBTkNFTExFRCdcclxuICB8ICdQQVlNRU5UX1JFQ0VJVkVEJ1xyXG4gIHwgJ1BBWU1FTlRfRkFJTEVEJ1xyXG4gIHwgJ0pPQl9TVEFSVEVEJ1xyXG4gIHwgJ0pPQl9DT01QTEVURUQnXHJcbiAgfCAnSk9CX0NBTkNFTExFRCdcclxuICB8ICdESVNQVVRFX0NSRUFURUQnXHJcbiAgfCAnRElTUFVURV9SRVNPTFZFRCdcclxuICB8ICdSRVZJRVdfU1VCTUlUVEVEJ1xyXG4gIHwgJ1BBWU1FTlRfUkVMRUFTRUQnXHJcbiAgfCAnRVNDUk9XX1JFTEVBU0VEJ1xyXG4gIHwgJ0NBVEFMT0dVRV9TRVRVUF9SRVFVSVJFRCdcclxuICB8ICdDQVRBTE9HVUVfU0VUVVBfQ09NUExFVEVEJ1xyXG4gIHwgJ0NBVEFMT0dVRV9TRVRVUF9SRU1JTkRFUidcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uRGF0YSB7XHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICB0eXBlOiBOb3RpZmljYXRpb25UeXBlXHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIGNvbnRlbnQ6IHN0cmluZ1xyXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvbldpdGhVc2VyIHtcclxuICBpZDogc3RyaW5nXHJcbiAgdXNlcklkOiBzdHJpbmdcclxuICB0eXBlOiBzdHJpbmdcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgY29udGVudDogc3RyaW5nXHJcbiAgaXNSZWFkOiBib29sZWFuXHJcbiAgY3JlYXRlZEF0OiBEYXRlXHJcbiAgdXNlcjoge1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbiAgICBlbWFpbDogc3RyaW5nXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgbm90aWZpY2F0aW9uIGZvciBhIHVzZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RpZmljYXRpb24oZGF0YTogTm90aWZpY2F0aW9uRGF0YSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBhd2FpdCBkYi5ub3RpZmljYXRpb24uY3JlYXRlKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgdHlwZTogZGF0YS50eXBlLFxyXG4gICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGRhdGEuY29udGVudCwgLy8gRGF0YWJhc2UgdXNlcyAnbWVzc2FnZScgZmllbGQsIGJ1dCBpbnRlcmZhY2UgdXNlcyAnY29udGVudCdcclxuICAgICAgICBpc1JlYWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgaWQ6IHRydWUsXHJcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgIGVtYWlsOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn5SUIE5vdGlmaWNhdGlvbiBjcmVhdGVkOiAke2RhdGEudHlwZX0gZm9yIHVzZXIgJHtkYXRhLnVzZXJJZH1gKVxyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBub3RpZmljYXRpb246JywgZXJyb3IpXHJcbiAgICB0aHJvdyBlcnJvclxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBtdWx0aXBsZSBub3RpZmljYXRpb25zIGF0IG9uY2VcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVCdWxrTm90aWZpY2F0aW9ucyhub3RpZmljYXRpb25zOiBOb3RpZmljYXRpb25EYXRhW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY3JlYXRlZE5vdGlmaWNhdGlvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgbm90aWZpY2F0aW9ucy5tYXAobm90aWZpY2F0aW9uID0+IGNyZWF0ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pKVxyXG4gICAgKVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg8J+UlCBDcmVhdGVkICR7Y3JlYXRlZE5vdGlmaWNhdGlvbnMubGVuZ3RofSBub3RpZmljYXRpb25zYClcclxuICAgIHJldHVybiBjcmVhdGVkTm90aWZpY2F0aW9uc1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBidWxrIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpXHJcbiAgICB0aHJvdyBlcnJvclxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBub3RpZmljYXRpb25zIGZvciBhIHVzZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyTm90aWZpY2F0aW9ucyh1c2VySWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUwKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBhd2FpdCBkYi5ub3RpZmljYXRpb24uZmluZE1hbnkoe1xyXG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcclxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxyXG4gICAgICB0YWtlOiBsaW1pdCxcclxuICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICBpZDogdHJ1ZSxcclxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW1haWw6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvbnNcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBnZXQgdXNlciBub3RpZmljYXRpb25zOicsIGVycm9yKVxyXG4gICAgdGhyb3cgZXJyb3JcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYXJrIG5vdGlmaWNhdGlvbiBhcyByZWFkXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFya05vdGlmaWNhdGlvbkFzUmVhZChub3RpZmljYXRpb25JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBhd2FpdCBkYi5ub3RpZmljYXRpb24udXBkYXRlTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgaWQ6IG5vdGlmaWNhdGlvbklkLFxyXG4gICAgICAgIHVzZXJJZDogdXNlcklkXHJcbiAgICAgIH0sXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpc1JlYWQ6IHRydWVcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gbm90aWZpY2F0aW9uXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gbWFyayBub3RpZmljYXRpb24gYXMgcmVhZDonLCBlcnJvcilcclxuICAgIHRocm93IGVycm9yXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTWFyayBhbGwgbm90aWZpY2F0aW9ucyBhcyByZWFkIGZvciBhIHVzZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrQWxsTm90aWZpY2F0aW9uc0FzUmVhZCh1c2VySWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5ub3RpZmljYXRpb24udXBkYXRlTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgaXNSZWFkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgaXNSZWFkOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc29sZS5sb2coYPCflJQgTWFya2VkICR7cmVzdWx0LmNvdW50fSBub3RpZmljYXRpb25zIGFzIHJlYWQgZm9yIHVzZXIgJHt1c2VySWR9YClcclxuICAgIHJldHVybiByZXN1bHRcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBtYXJrIGFsbCBub3RpZmljYXRpb25zIGFzIHJlYWQ6JywgZXJyb3IpXHJcbiAgICB0aHJvdyBlcnJvclxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1bnJlYWQgbm90aWZpY2F0aW9uIGNvdW50IGZvciBhIHVzZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVbnJlYWROb3RpZmljYXRpb25Db3VudCh1c2VySWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IGRiLm5vdGlmaWNhdGlvbi5jb3VudCh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgaXNSZWFkOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBjb3VudFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGdldCB1bnJlYWQgbm90aWZpY2F0aW9uIGNvdW50OicsIGVycm9yKVxyXG4gICAgcmV0dXJuIDBcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWxldGUgb2xkIG5vdGlmaWNhdGlvbnMgKGNsZWFudXApXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cE9sZE5vdGlmaWNhdGlvbnMoZGF5c09sZDogbnVtYmVyID0gMzApIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY3V0b2ZmRGF0ZSA9IG5ldyBEYXRlKClcclxuICAgIGN1dG9mZkRhdGUuc2V0RGF0ZShjdXRvZmZEYXRlLmdldERhdGUoKSAtIGRheXNPbGQpXHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIubm90aWZpY2F0aW9uLmRlbGV0ZU1hbnkoe1xyXG4gICAgICB3aGVyZToge1xyXG4gICAgICAgIGNyZWF0ZWRBdDoge1xyXG4gICAgICAgICAgbHQ6IGN1dG9mZkRhdGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzUmVhZDogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFuZWQgdXAgJHtyZXN1bHQuY291bnR9IG9sZCBub3RpZmljYXRpb25zYClcclxuICAgIHJldHVybiByZXN1bHRcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjbGVhbnVwIG9sZCBub3RpZmljYXRpb25zOicsIGVycm9yKVxyXG4gICAgdGhyb3cgZXJyb3JcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBOb3RpZmljYXRpb24gdGVtcGxhdGVzIGZvciBkaWZmZXJlbnQgYWN0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE5vdGlmaWNhdGlvblRlbXBsYXRlcyA9IHtcclxuICBCT09LSU5HX0NSRUFURUQ6IChib29raW5nOiBhbnkpID0+ICh7XHJcbiAgICB0eXBlOiAnQk9PS0lOR19DUkVBVEVEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdOZXcgQm9va2luZyBSZXF1ZXN0JyxcclxuICAgIGNvbnRlbnQ6IGBZb3UgaGF2ZSBhIG5ldyBib29raW5nIHJlcXVlc3QgZm9yICR7Ym9va2luZy5zZXJ2aWNlPy5uYW1lIHx8ICdzZXJ2aWNlJ30gZnJvbSAke2Jvb2tpbmcuY2xpZW50Py5uYW1lIHx8ICdhIGNsaWVudCd9LiBQbGVhc2UgcmV2aWV3IGFuZCByZXNwb25kLmBcclxuICB9KSxcclxuXHJcbiAgQk9PS0lOR19BQ0NFUFRFRDogKGJvb2tpbmc6IGFueSkgPT4gKHtcclxuICAgIHR5cGU6ICdCT09LSU5HX0FDQ0VQVEVEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdCb29raW5nIEFjY2VwdGVkIScsXHJcbiAgICBjb250ZW50OiBgR3JlYXQgbmV3cyEgWW91ciBib29raW5nIGZvciAke2Jvb2tpbmcuc2VydmljZT8ubmFtZSB8fCAnc2VydmljZSd9IGhhcyBiZWVuIGFjY2VwdGVkIGJ5ICR7Ym9va2luZy5wcm92aWRlcj8uYnVzaW5lc3NOYW1lIHx8ICd0aGUgcHJvdmlkZXInfS4gWW91IGNhbiBub3cgcHJvY2VlZCB3aXRoIHBheW1lbnQuYFxyXG4gIH0pLFxyXG5cclxuICBCT09LSU5HX0RFQ0xJTkVEOiAoYm9va2luZzogYW55KSA9PiAoe1xyXG4gICAgdHlwZTogJ0JPT0tJTkdfREVDTElORUQnIGFzIE5vdGlmaWNhdGlvblR5cGUsXHJcbiAgICB0aXRsZTogJ0Jvb2tpbmcgRGVjbGluZWQnLFxyXG4gICAgY29udGVudDogYFVuZm9ydHVuYXRlbHksIHlvdXIgYm9va2luZyBmb3IgJHtib29raW5nLnNlcnZpY2U/Lm5hbWUgfHwgJ3NlcnZpY2UnfSB3YXMgZGVjbGluZWQuIERvbid0IHdvcnJ5LCB5b3UgY2FuIHRyeSBib29raW5nIHdpdGggYW5vdGhlciBwcm92aWRlci5gXHJcbiAgfSksXHJcblxyXG4gIEJPT0tJTkdfQ0FOQ0VMTEVEOiAoYm9va2luZzogYW55LCBjYW5jZWxsZWRCeTogJ2NsaWVudCcgfCAncHJvdmlkZXInKSA9PiAoe1xyXG4gICAgdHlwZTogJ0JPT0tJTkdfQ0FOQ0VMTEVEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdCb29raW5nIENhbmNlbGxlZCcsXHJcbiAgICBjb250ZW50OiBgWW91ciBib29raW5nIGZvciAke2Jvb2tpbmcuc2VydmljZT8ubmFtZSB8fCAnc2VydmljZSd9IGhhcyBiZWVuIGNhbmNlbGxlZCBieSAke2NhbmNlbGxlZEJ5ID09PSAnY2xpZW50JyA/ICd0aGUgY2xpZW50JyA6ICd0aGUgcHJvdmlkZXInfS5gXHJcbiAgfSksXHJcblxyXG4gIFBBWU1FTlRfUkVDRUlWRUQ6IChib29raW5nOiBhbnkpID0+ICh7XHJcbiAgICB0eXBlOiAnUEFZTUVOVF9SRUNFSVZFRCcgYXMgTm90aWZpY2F0aW9uVHlwZSxcclxuICAgIHRpdGxlOiAnUGF5bWVudCBSZWNlaXZlZCcsXHJcbiAgICBjb250ZW50OiBgUGF5bWVudCByZWNlaXZlZCBmb3IgJHtib29raW5nLnNlcnZpY2U/Lm5hbWUgfHwgJ3lvdXIgc2VydmljZSd9IC0gQm9va2luZyAjJHtib29raW5nLmlkfS4gWW91IGNhbiBub3cgc3RhcnQgdGhlIGpvYiFgXHJcbiAgfSksXHJcblxyXG4gIFBBWU1FTlRfRkFJTEVEOiAoYm9va2luZzogYW55KSA9PiAoe1xyXG4gICAgdHlwZTogJ1BBWU1FTlRfRkFJTEVEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdQYXltZW50IEZhaWxlZCcsXHJcbiAgICBjb250ZW50OiBgUGF5bWVudCBmYWlsZWQgZm9yICR7Ym9va2luZy5zZXJ2aWNlPy5uYW1lIHx8ICdzZXJ2aWNlJ30gLSBCb29raW5nICMke2Jvb2tpbmcuaWR9LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3Qgc3VwcG9ydC5gXHJcbiAgfSksXHJcblxyXG4gIEpPQl9TVEFSVEVEOiAoYm9va2luZzogYW55KSA9PiAoe1xyXG4gICAgdHlwZTogJ0pPQl9TVEFSVEVEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdKb2IgU3RhcnRlZCcsXHJcbiAgICBjb250ZW50OiBgR3JlYXQgbmV3cyEgJHtib29raW5nLnByb3ZpZGVyPy5idXNpbmVzc05hbWUgfHwgJ1RoZSBwcm92aWRlcid9IGhhcyBzdGFydGVkIHdvcmtpbmcgb24geW91ciAke2Jvb2tpbmcuc2VydmljZT8ubmFtZSB8fCAnc2VydmljZSd9LmBcclxuICB9KSxcclxuXHJcbiAgSk9CX0NPTVBMRVRFRDogKGJvb2tpbmc6IGFueSkgPT4gKHtcclxuICAgIHR5cGU6ICdKT0JfQ09NUExFVEVEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdKb2IgQ29tcGxldGVkJyxcclxuICAgIGNvbnRlbnQ6IGBZb3VyICR7Ym9va2luZy5zZXJ2aWNlPy5uYW1lIHx8ICdzZXJ2aWNlJ30gaGFzIGJlZW4gY29tcGxldGVkISBQbGVhc2UgcmV2aWV3IHRoZSB3b3JrIGFuZCBjb25maXJtIGNvbXBsZXRpb24gdG8gcmVsZWFzZSBwYXltZW50LmBcclxuICB9KSxcclxuXHJcbiAgRElTUFVURV9DUkVBVEVEOiAoYm9va2luZzogYW55LCBkaXNwdXRlVHlwZTogc3RyaW5nKSA9PiAoe1xyXG4gICAgdHlwZTogJ0RJU1BVVEVfQ1JFQVRFRCcgYXMgTm90aWZpY2F0aW9uVHlwZSxcclxuICAgIHRpdGxlOiAnRGlzcHV0ZSBDcmVhdGVkJyxcclxuICAgIGNvbnRlbnQ6IGBBIGRpc3B1dGUgaGFzIGJlZW4gY3JlYXRlZCBmb3IgYm9va2luZyAjJHtib29raW5nLmlkfSByZWdhcmRpbmcgJHtkaXNwdXRlVHlwZX0uIE91ciB0ZWFtIHdpbGwgcmV2aWV3IGFuZCByZXNvbHZlIHRoaXMgaXNzdWUuYFxyXG4gIH0pLFxyXG5cclxuICBESVNQVVRFX1JFU09MVkVEOiAoYm9va2luZzogYW55LCByZXNvbHV0aW9uOiBzdHJpbmcpID0+ICh7XHJcbiAgICB0eXBlOiAnRElTUFVURV9SRVNPTFZFRCcgYXMgTm90aWZpY2F0aW9uVHlwZSxcclxuICAgIHRpdGxlOiAnRGlzcHV0ZSBSZXNvbHZlZCcsXHJcbiAgICBjb250ZW50OiBgVGhlIGRpc3B1dGUgZm9yIGJvb2tpbmcgIyR7Ym9va2luZy5pZH0gaGFzIGJlZW4gcmVzb2x2ZWQ6ICR7cmVzb2x1dGlvbn1gXHJcbiAgfSksXHJcblxyXG4gIFJFVklFV19TVUJNSVRURUQ6IChib29raW5nOiBhbnksIHJhdGluZzogbnVtYmVyKSA9PiAoe1xyXG4gICAgdHlwZTogJ1JFVklFV19TVUJNSVRURUQnIGFzIE5vdGlmaWNhdGlvblR5cGUsXHJcbiAgICB0aXRsZTogJ1JldmlldyBTdWJtaXR0ZWQnLFxyXG4gICAgY29udGVudDogYEEgJHtyYXRpbmd9LXN0YXIgcmV2aWV3IGhhcyBiZWVuIHN1Ym1pdHRlZCBmb3IgeW91ciBzZXJ2aWNlIG9uIGJvb2tpbmcgIyR7Ym9va2luZy5pZH0uYFxyXG4gIH0pLFxyXG5cclxuICBQQVlNRU5UX1JFTEVBU0VEOiAoYm9va2luZzogYW55LCBhbW91bnQ6IG51bWJlcikgPT4gKHtcclxuICAgIHR5cGU6ICdQQVlNRU5UX1JFTEVBU0VEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdQYXltZW50IFJlbGVhc2VkJyxcclxuICAgIGNvbnRlbnQ6IGBQYXltZW50IG9mIFIke2Ftb3VudC50b0ZpeGVkKDIpfSBoYXMgYmVlbiByZWxlYXNlZCBmb3IgYm9va2luZyAjJHtib29raW5nLmlkfS4gVGhlIGZ1bmRzIHNob3VsZCBhcHBlYXIgaW4geW91ciBhY2NvdW50IHdpdGhpbiAxLTMgYnVzaW5lc3MgZGF5cy5gXHJcbiAgfSksXHJcblxyXG4gIEVTQ1JPV19SRUxFQVNFRDogKGJvb2tpbmc6IGFueSwgYW1vdW50OiBudW1iZXIpID0+ICh7XHJcbiAgICB0eXBlOiAnRVNDUk9XX1JFTEVBU0VEJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICdFc2Nyb3cgUmVsZWFzZWQnLFxyXG4gICAgY29udGVudDogYEVzY3JvdyBwYXltZW50IG9mIFIke2Ftb3VudC50b0ZpeGVkKDIpfSBoYXMgYmVlbiByZWxlYXNlZCBmb3IgYm9va2luZyAjJHtib29raW5nLmlkfS5gXHJcbiAgfSksXHJcblxyXG4gIENBVEFMT0dVRV9TRVRVUF9SRVFVSVJFRDogKHByb3ZpZGVyOiBhbnksIHBhY2thZ2VDb3VudDogbnVtYmVyKSA9PiAoe1xyXG4gICAgdHlwZTogJ0NBVEFMT0dVRV9TRVRVUF9SRVFVSVJFRCcgYXMgTm90aWZpY2F0aW9uVHlwZSxcclxuICAgIHRpdGxlOiAn8J+OiSBZb3VyIFNlcnZpY2UgUGFja2FnZXMgQXJlIFJlYWR5IScsXHJcbiAgICBjb250ZW50OiBgV2UndmUgY3JlYXRlZCAke3BhY2thZ2VDb3VudH0gc3RhcnRlciBwYWNrYWdlcyBmb3IgeW91ciBzZXJ2aWNlcy4gQ3VzdG9taXplIHRoZW0gbm93IHRvIHN0YXJ0IHJlY2VpdmluZyBib29raW5ncyFgXHJcbiAgfSksXHJcblxyXG4gIENBVEFMT0dVRV9TRVRVUF9DT01QTEVURUQ6IChwcm92aWRlcjogYW55LCBjb21wbGV0aW9uVGltZTogc3RyaW5nKSA9PiAoe1xyXG4gICAgdHlwZTogJ0NBVEFMT0dVRV9TRVRVUF9DT01QTEVURUQnIGFzIE5vdGlmaWNhdGlvblR5cGUsXHJcbiAgICB0aXRsZTogJ/CfjokgU2V0dXAgQ29tcGxldGUgLSBZb3VcXCdyZSBSZWFkeSB0byBFYXJuIScsXHJcbiAgICBjb250ZW50OiBgQ29uZ3JhdHVsYXRpb25zISBZb3UgY29tcGxldGVkIHlvdXIgc2VydmljZSBwYWNrYWdlcyBzZXR1cCBpbiAke2NvbXBsZXRpb25UaW1lfS4gWW91J3JlIG5vdyBsaXZlIGFuZCByZWFkeSB0byByZWNlaXZlIGJvb2tpbmdzIWBcclxuICB9KSxcclxuXHJcbiAgQ0FUQUxPR1VFX1NFVFVQX1JFTUlOREVSOiAocHJvdmlkZXI6IGFueSwgZGF5c1NpbmNlOiBudW1iZXIpID0+ICh7XHJcbiAgICB0eXBlOiAnQ0FUQUxPR1VFX1NFVFVQX1JFTUlOREVSJyBhcyBOb3RpZmljYXRpb25UeXBlLFxyXG4gICAgdGl0bGU6ICfwn5KhIENvbXBsZXRlIFlvdXIgU2VydmljZSBQYWNrYWdlcycsXHJcbiAgICBjb250ZW50OiBgRG9uJ3QgbWlzcyBvdXQgb24gYm9va2luZ3MhIENvbXBsZXRlIHlvdXIgc2VydmljZSBwYWNrYWdlcyBzZXR1cCB0byBzdGFydCBlYXJuaW5nLiBJdCdzIGJlZW4gJHtkYXlzU2luY2V9IGRheXMgc2luY2UgeW91ciBwYWNrYWdlcyB3ZXJlIGNyZWF0ZWQuYFxyXG4gIH0pXHJcbn1cclxuIl0sIm5hbWVzIjpbImRiIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwiZGF0YSIsIm5vdGlmaWNhdGlvbiIsImNyZWF0ZSIsInVzZXJJZCIsInR5cGUiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJjb250ZW50IiwiaXNSZWFkIiwiaW5jbHVkZSIsInVzZXIiLCJzZWxlY3QiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImNyZWF0ZUJ1bGtOb3RpZmljYXRpb25zIiwibm90aWZpY2F0aW9ucyIsImNyZWF0ZWROb3RpZmljYXRpb25zIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImxlbmd0aCIsImdldFVzZXJOb3RpZmljYXRpb25zIiwibGltaXQiLCJmaW5kTWFueSIsIndoZXJlIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInRha2UiLCJtYXJrTm90aWZpY2F0aW9uQXNSZWFkIiwibm90aWZpY2F0aW9uSWQiLCJ1cGRhdGVNYW55IiwibWFya0FsbE5vdGlmaWNhdGlvbnNBc1JlYWQiLCJyZXN1bHQiLCJjb3VudCIsImdldFVucmVhZE5vdGlmaWNhdGlvbkNvdW50IiwiY2xlYW51cE9sZE5vdGlmaWNhdGlvbnMiLCJkYXlzT2xkIiwiY3V0b2ZmRGF0ZSIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImRlbGV0ZU1hbnkiLCJsdCIsIk5vdGlmaWNhdGlvblRlbXBsYXRlcyIsIkJPT0tJTkdfQ1JFQVRFRCIsImJvb2tpbmciLCJzZXJ2aWNlIiwiY2xpZW50IiwiQk9PS0lOR19BQ0NFUFRFRCIsInByb3ZpZGVyIiwiYnVzaW5lc3NOYW1lIiwiQk9PS0lOR19ERUNMSU5FRCIsIkJPT0tJTkdfQ0FOQ0VMTEVEIiwiY2FuY2VsbGVkQnkiLCJQQVlNRU5UX1JFQ0VJVkVEIiwiUEFZTUVOVF9GQUlMRUQiLCJKT0JfU1RBUlRFRCIsIkpPQl9DT01QTEVURUQiLCJESVNQVVRFX0NSRUFURUQiLCJkaXNwdXRlVHlwZSIsIkRJU1BVVEVfUkVTT0xWRUQiLCJyZXNvbHV0aW9uIiwiUkVWSUVXX1NVQk1JVFRFRCIsInJhdGluZyIsIlBBWU1FTlRfUkVMRUFTRUQiLCJhbW91bnQiLCJ0b0ZpeGVkIiwiRVNDUk9XX1JFTEVBU0VEIiwiQ0FUQUxPR1VFX1NFVFVQX1JFUVVJUkVEIiwicGFja2FnZUNvdW50IiwiQ0FUQUxPR1VFX1NFVFVQX0NPTVBMRVRFRCIsImNvbXBsZXRpb25UaW1lIiwiQ0FUQUxPR1VFX1NFVFVQX1JFTUlOREVSIiwiZGF5c1NpbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/notification-service.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MAX_RETRIES = 3;\nconst INITIAL_RETRY_DELAY = 200;\nconst MAX_RETRY_DELAY = 2000;\nfunction sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\n// Enhanced database URL configuration\nfunction getDatabaseUrl() {\n    // Use environment variable for database URL\n    const databaseUrl = process.env.DATABASE_URL;\n    if (!databaseUrl) {\n        throw new Error(\"DATABASE_URL environment variable is required\");\n    }\n    console.log(\"\\uD83D\\uDD17 Database URL configured from environment variables\");\n    return databaseUrl;\n}\nclass PrismaWithRetry extends _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient {\n    constructor(){\n        super({\n            log:  true ? [\n                \"query\",\n                \"error\",\n                \"warn\"\n            ] : 0,\n            errorFormat: \"pretty\",\n            datasources: {\n                db: {\n                    url: getDatabaseUrl()\n                }\n            }\n        });\n        this.isConnected = false;\n    }\n    async handleConnectionError(error) {\n        if (error.message.includes(\"Connection pool timeout\")) {\n            console.error(\"Connection pool timeout detected. Attempting to reconnect...\");\n            await this.reconnect();\n            return true;\n        }\n        return false;\n    }\n    async reconnect() {\n        try {\n            await this.$disconnect();\n            this.isConnected = false;\n            await this.connect();\n        } catch (error) {\n            console.error(\"Failed to reconnect:\", error);\n            throw error;\n        }\n    }\n    async connect() {\n        if (this.isConnected) {\n            return;\n        }\n        let lastError;\n        let delay = INITIAL_RETRY_DELAY;\n        for(let attempt = 1; attempt <= MAX_RETRIES; attempt++){\n            try {\n                await super.$connect();\n                this.isConnected = true;\n                console.log(\"✅ Database connection established successfully\");\n                // Test the connection\n                await this.$queryRaw`SELECT 1`;\n                return;\n            } catch (error) {\n                lastError = error;\n                console.error(`❌ Connection attempt ${attempt} failed:`, error);\n                if (attempt < MAX_RETRIES) {\n                    console.log(`Retrying in ${delay}ms...`);\n                    await sleep(delay);\n                    delay = Math.min(delay * 2, MAX_RETRY_DELAY);\n                }\n            }\n        }\n        throw new Error(`Failed to connect after ${MAX_RETRIES} attempts. Last error: ${lastError}`);\n    }\n    async disconnect() {\n        if (!this.isConnected) {\n            return;\n        }\n        try {\n            await super.$disconnect();\n            this.isConnected = false;\n            console.log(\"Database connection closed successfully\");\n        } catch (error) {\n            console.error(\"Error disconnecting from database:\", error);\n            throw error;\n        }\n    }\n    async query(operation) {\n        try {\n            return await operation();\n        } catch (error) {\n            if (await this.handleConnectionError(error)) {\n                return await operation();\n            }\n            throw error;\n        }\n    }\n    // Override key methods to use our query wrapper\n    async $queryRaw(query) {\n        return this.query(()=>super.$queryRaw(query));\n    }\n    async $executeRaw(query) {\n        return this.query(()=>super.$executeRaw(query));\n    }\n}\nconst prisma = global.prisma || new PrismaWithRetry();\nif (true) {\n    global.prisma = prisma;\n}\n// Export the instance as default and named export\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDZCxJQUFJLE1BQU0sSUFBSSxDQUFDRCxxQkFBcUIsQ0FBQ0MsUUFBUTtnQkFDM0MsT0FBTyxNQUFNZTtZQUNmO1lBQ0EsTUFBTWY7UUFDUjtJQUNGO0lBRUEsZ0RBQWdEO0lBQ2hELE1BQU1VLFVBQXVCSSxLQUF3QyxFQUFjO1FBQ2pGLE9BQU8sSUFBSSxDQUFDQSxLQUFLLENBQUMsSUFBTSxLQUFLLENBQUNKLFVBQWFJO0lBQzdDO0lBRUEsTUFBTUUsWUFBeUJGLEtBQXdDLEVBQWM7UUFDbkYsT0FBTyxJQUFJLENBQUNBLEtBQUssQ0FBQyxJQUFNLEtBQUssQ0FBQ0UsWUFBZUY7SUFDL0M7QUFDRjtBQU9PLE1BQU1HLFNBQVNDLE9BQU9ELE1BQU0sSUFBSSxJQUFJekIsa0JBQWtCO0FBRTdELElBQUlOLElBQXlCLEVBQWM7SUFDekNnQyxPQUFPRCxNQUFNLEdBQUdBO0FBQ2xCO0FBRUEsa0RBQWtEO0FBQ2xELGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbmNvbnN0IE1BWF9SRVRSSUVTID0gMztcbmNvbnN0IElOSVRJQUxfUkVUUllfREVMQVkgPSAyMDA7XG5jb25zdCBNQVhfUkVUUllfREVMQVkgPSAyMDAwO1xuXG5mdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cblxuLy8gRW5oYW5jZWQgZGF0YWJhc2UgVVJMIGNvbmZpZ3VyYXRpb25cbmZ1bmN0aW9uIGdldERhdGFiYXNlVXJsKCkge1xuICAvLyBVc2UgZW52aXJvbm1lbnQgdmFyaWFibGUgZm9yIGRhdGFiYXNlIFVSTFxuICBjb25zdCBkYXRhYmFzZVVybCA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTDtcbiAgXG4gIGlmICghZGF0YWJhc2VVcmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RBVEFCQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZygn8J+UlyBEYXRhYmFzZSBVUkwgY29uZmlndXJlZCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xuICByZXR1cm4gZGF0YWJhc2VVcmw7XG59XG5cbmNsYXNzIFByaXNtYVdpdGhSZXRyeSBleHRlbmRzIFByaXNtYUNsaWVudCB7XG4gIHByaXZhdGUgaXNDb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7XG4gICAgICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gWydxdWVyeScsICdlcnJvcicsICd3YXJuJ10gOiBbJ2Vycm9yJ10sXG4gICAgICBlcnJvckZvcm1hdDogJ3ByZXR0eScsXG4gICAgICBkYXRhc291cmNlczoge1xuICAgICAgICBkYjoge1xuICAgICAgICAgIHVybDogZ2V0RGF0YWJhc2VVcmwoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUNvbm5lY3Rpb25FcnJvcihlcnJvcjogYW55KSB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0Nvbm5lY3Rpb24gcG9vbCB0aW1lb3V0JykpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nvbm5lY3Rpb24gcG9vbCB0aW1lb3V0IGRldGVjdGVkLiBBdHRlbXB0aW5nIHRvIHJlY29ubmVjdC4uLicpO1xuICAgICAgYXdhaXQgdGhpcy5yZWNvbm5lY3QoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlY29ubmVjdCgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy4kZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgYXdhaXQgdGhpcy5jb25uZWN0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWNvbm5lY3Q6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBsYXN0RXJyb3I7XG4gICAgbGV0IGRlbGF5ID0gSU5JVElBTF9SRVRSWV9ERUxBWTtcblxuICAgIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IE1BWF9SRVRSSUVTOyBhdHRlbXB0KyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLiRjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBUZXN0IHRoZSBjb25uZWN0aW9uXG4gICAgICAgIGF3YWl0IHRoaXMuJHF1ZXJ5UmF3YFNFTEVDVCAxYDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbGFzdEVycm9yID0gZXJyb3I7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBDb25uZWN0aW9uIGF0dGVtcHQgJHthdHRlbXB0fSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGF0dGVtcHQgPCBNQVhfUkVUUklFUykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXRyeWluZyBpbiAke2RlbGF5fW1zLi4uYCk7XG4gICAgICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpO1xuICAgICAgICAgIGRlbGF5ID0gTWF0aC5taW4oZGVsYXkgKiAyLCBNQVhfUkVUUllfREVMQVkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY29ubmVjdCBhZnRlciAke01BWF9SRVRSSUVTfSBhdHRlbXB0cy4gTGFzdCBlcnJvcjogJHtsYXN0RXJyb3J9YCk7XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzdXBlci4kZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIGNvbm5lY3Rpb24gY2xvc2VkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkaXNjb25uZWN0aW5nIGZyb20gZGF0YWJhc2U6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcXVlcnk8VD4ob3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGF3YWl0IHRoaXMuaGFuZGxlQ29ubmVjdGlvbkVycm9yKGVycm9yKSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBPdmVycmlkZSBrZXkgbWV0aG9kcyB0byB1c2Ugb3VyIHF1ZXJ5IHdyYXBwZXJcbiAgYXN5bmMgJHF1ZXJ5UmF3PFQgPSB1bmtub3duPihxdWVyeTogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCBQcmlzbWEuU3FsKTogUHJvbWlzZTxUPiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnkoKCkgPT4gc3VwZXIuJHF1ZXJ5UmF3PFQ+KHF1ZXJ5KSk7XG4gIH1cblxuICBhc3luYyAkZXhlY3V0ZVJhdzxUID0gdW5rbm93bj4ocXVlcnk6IFRlbXBsYXRlU3RyaW5nc0FycmF5IHwgUHJpc21hLlNxbCk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5KCgpID0+IHN1cGVyLiRleGVjdXRlUmF3PFQ+KHF1ZXJ5KSk7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGluc3RhbmNlXG5kZWNsYXJlIGdsb2JhbCB7XG4gIHZhciBwcmlzbWE6IFByaXNtYVdpdGhSZXRyeSB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbC5wcmlzbWEgfHwgbmV3IFByaXNtYVdpdGhSZXRyeSgpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBnbG9iYWwucHJpc21hID0gcHJpc21hO1xufVxuXG4vLyBFeHBvcnQgdGhlIGluc3RhbmNlIGFzIGRlZmF1bHQgYW5kIG5hbWVkIGV4cG9ydFxuZXhwb3J0IGRlZmF1bHQgcHJpc21hOyJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJNQVhfUkVUUklFUyIsIklOSVRJQUxfUkVUUllfREVMQVkiLCJNQVhfUkVUUllfREVMQVkiLCJzbGVlcCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2V0RGF0YWJhc2VVcmwiLCJkYXRhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJQcmlzbWFXaXRoUmV0cnkiLCJjb25zdHJ1Y3RvciIsImVycm9yRm9ybWF0IiwiZGF0YXNvdXJjZXMiLCJkYiIsInVybCIsImlzQ29ubmVjdGVkIiwiaGFuZGxlQ29ubmVjdGlvbkVycm9yIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJyZWNvbm5lY3QiLCIkZGlzY29ubmVjdCIsImNvbm5lY3QiLCJsYXN0RXJyb3IiLCJkZWxheSIsImF0dGVtcHQiLCIkY29ubmVjdCIsIiRxdWVyeVJhdyIsIk1hdGgiLCJtaW4iLCJkaXNjb25uZWN0IiwicXVlcnkiLCJvcGVyYXRpb24iLCIkZXhlY3V0ZVJhdyIsInByaXNtYSIsImdsb2JhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/jose","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&page=%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbook-service%2Fsend-offer-enhanced%2Froute.ts&appDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cliqui%5COneDrive%5CDesktop%5CConnectSA%5CConnectSA-k9&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();